<!DOCTYPE html>Â 
<html lang="en">
<head>
 <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0", viewport-fit=cover"/><title>Virtual Chartered Accountants</title><meta name="description" content="Aapka personal Virtual Chartered Accountant. GST, Income Tax, finance, aur investments se jude sawaal puchein aur turant jawaab paayein."><meta name="keywords" content="Virtual Chartered Accountant, CA Chatbot, GST Expert, Tax Consultant, Income Tax India, Financial Advisor"><meta name="robots" content="index, follow"><meta name="googlebot" content="index, follow"><meta property="og:title" content="Virtual Chartered Accountants"><meta property="og:description" content="Aapka personal Virtual CA. GST, Income Tax, aur finance ke sawaal puchein."><meta property="og:image" content="https://ca-app-eta.vercel.app/whatsapp.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:image:alt" content="Virtual Chartered Accountant"><meta property="og:url" content="https://ca-app-eta.vercel.app"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Virtual Chartered Accountants"><meta name="twitter:description" content="Aapka personal Virtual CA. GST, Income Tax, aur finance ke sawaal puchein."><meta name="twitter:image" content="https://ca-app-eta.vercel.app/whatsapp.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-KMZ77HZPFR"></script><script>
Â  window.dataLayer = window.dataLayer || [];
Â  function gtag(){dataLayer.push(arguments);}
Â  gtag('js', new Date());

Â  gtag('config', 'G-KMZ77HZPFR');
</script><script src="https://cdn.tailwindcss.com"></script><style>
Â  Â  Â  Â  html, body {
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }
Â  Â  Â  Â  #root {
Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  Â  Â  height: 100dvh;
Â  Â  Â  Â  }
Â  Â  Â  Â  .app-container {
Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  Â  Â  height: 100dvh;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  }
Â  Â  Â  Â  .fixed-header {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  right: 0;
Â  Â  Â  Â  Â  Â  z-index: 50;
Â  Â  Â  Â  }
Â  Â  Â  Â  .chat-content {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  Â  Â  margin-top: 72px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .chat-footer {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  bottom: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  right: 0;
Â  Â  Â  Â  Â  Â  z-index: 40;
Â  Â  Â  Â  }
Â  Â  Â  Â  .message-container {
Â  Â  Â  Â  Â  Â  height: calc(100vh - 144px);
Â  Â  Â  Â  Â  Â  height: calc(100dvh - 144px);
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  Â  Â  margin-top: 72px;
Â  Â  Â  Â  Â  Â  margin-bottom: 72px;
Â  Â  Â  Â  }
Â  Â  </style><script type="application/ld+json">
Â  Â  {
Â  Â  Â  "@context": "https://schema.org",
Â  Â  Â  "@type": "SoftwareApplication",
Â  Â  Â  "name": "Virtual Chartered Accountants",
Â  Â  Â  "applicationCategory": "FinanceApplication",
Â  Â  Â  "operatingSystem": "Web",
Â  Â  Â  "description": "An AI-powered chatbot for Chartered Accountants in India to get expert advice on GST, Income Tax, and Auditing. Saves time by analyzing documents and providing real-time updates.",
Â  Â  Â  "developer": {
Â  Â  Â  Â  "@type": "Person",
Â  Â  Â  Â  "name": "Sumit Garg"
Â  Â  Â  },
Â  Â  Â  "offers": {
Â  Â  Â  Â  "@type": "Offer",
Â  Â  Â  Â  "price": "0"Â 
Â  Â  Â  }
Â  Â  }
Â  Â  </script><script src="https://unpkg.com/@babel/standalone/babel.min.js"></script><script src="js/indexeddb-utils.js"></script><script>
Â  Â  Â  Â  let isAuthenticated = false;

const googleDriveService = {
Â  Â  async findOrCreateFolder(_a1, _a2 = null) {
Â  Â  Â  Â  const _b1 = _a2 ? `'${_a2}' in parents` : "'root' in parents";
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const _c1 = await gapi.client.drive.files.list({
Â  Â  Â  Â  Â  Â  Â  Â  q: `mimeType='application/vnd.google-apps.folder' and name='${_a1}' and ${_b1} and trashed=false`,
Â  Â  Â  Â  Â  Â  Â  Â  fields: 'files(id, name)',
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  if (_c1.result.files.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Folder '${_a1}' found with ID: ${_c1.result.files[0].id}`);
Â  Â  Â  Â  Â  Â  Â  Â  return _c1.result.files[0].id;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Folder '${_a1}' not found, creating new one...`);
Â  Â  Â  Â  Â  Â  Â  Â  const _d1 = { name: _a1, mimeType: 'application/vnd.google-apps.folder', parents: _a2 ? [_a2] : ['root'] };
Â  Â  Â  Â  Â  Â  Â  Â  const _e1 = await gapi.client.drive.files.create({ resource: _d1, fields: 'id' });
Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Folder created with ID: ${_e1.result.id}`);
Â  Â  Â  Â  Â  Â  Â  Â  return _e1.result.id;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch (_f1) {
Â  Â  Â  Â  Â  Â  console.error("Error finding or creating folder:", _f1);
Â  Â  Â  Â  Â  Â  let _g1 = "An unknown error occurred. Check console for details.";
Â  Â  Â  Â  Â  Â  if (_f1 && _f1.body) { try { const _h1 = JSON.parse(_f1.body); if (_h1.error && _h1.error.message) { _g1 = _h1.error.message; } } catch (_i1) { _g1 = "Could not read the exact error message from Google."; } }
Â  Â  Â  Â  Â  Â  alert("Google Drive Error: " + _g1);
Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  }
Â  Â  },
Â  Â  async findFileByName(_j1, _k1) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const _l1 = await gapi.client.drive.files.list({
Â  Â  Â  Â  Â  Â  Â  Â  q: `name='${_j1}' and '${_k1}' in parents and trashed=false`,
Â  Â  Â  Â  Â  Â  Â  Â  fields: 'files(id, name)',
Â  Â  Â  Â  Â  Â  Â  Â  pageSize: 1
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  return _l1.result.files.length > 0 ? _l1.result.files[0].id : null;
Â  Â  Â  Â  } catch (_m1) { console.error("Error finding file:", _m1); return null; }
Â  Â  },
Â  Â  async deleteFile(_n1) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  await gapi.client.drive.files.delete({ fileId: _n1 });
Â  Â  Â  Â  Â  Â  console.log(`File with ID ${_n1} deleted successfully.`);
Â  Â  Â  Â  Â  Â  return true;
Â  Â  Â  Â  } catch (_o1) { console.error("Error deleting file:", _o1); return false; }
Â  Â  },
Â  Â  async uploadJsonFile(_p1, _q1, _r1) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const _s1 = JSON.stringify(_q1, null, 2);
Â  Â  Â  Â  Â  Â  const _t1 = {
Â  Â  Â  Â  Â  Â  Â  Â  name: _p1,
Â  Â  Â  Â  Â  Â  Â  Â  parents: [_r1]
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  const _u1 = '-------314159265358979323846';
Â  Â  Â  Â  Â  Â  const _v1 = `\r\n--${_u1}\r\n`;
Â  Â  Â  Â  Â  Â  const _w1 = `\r\n--${_u1}--`;
Â  Â  Â  Â  Â  Â  const _x1 =
Â  Â  Â  Â  Â  Â  Â  Â  _v1 + 'Content-Type: application/json; charset=UTF-8\r\n\r\n' + JSON.stringify(_t1) +
Â  Â  Â  Â  Â  Â  Â  Â  _v1 + 'Content-Type: application/json\r\n\r\n' + _s1 + _w1;
Â  Â  Â  Â  Â  Â  const _y1 = gapi.client.getToken();
Â  Â  Â  Â  Â  Â  if (!_y1) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Authentication token not found!");
Â  Â  Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const _z1 = await fetch('https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart', {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Authorization': `Bearer ${_y1.access_token}`,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': `multipart/related; boundary=${_u1}`
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  body: _x1
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  if (!_z1.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  const _a2 = await _z1.json();
Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(JSON.stringify(_a2));
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const _b2 = await _z1.json();
Â  Â  Â  Â  Â  Â  console.log(`File '${_p1}' uploaded successfully with ID: ${_b2.id}`);
Â  Â  Â  Â  Â  Â  return _b2.id;
Â  Â  Â  Â  } catch (_c2) {
Â  Â  Â  Â  Â  Â  console.error("Error uploading file with fetch:", _c2);
Â  Â  Â  Â  Â  Â  alert("Google Drive UPLOAD Error: " + _c2.message);
Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  }
Â  Â  },
Â  Â  async updateJsonFile(_d2, _e2) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const _f2 = JSON.stringify(_e2, null, 2);
Â  Â  Â  Â  Â  Â  const _g2 = gapi.client.getToken();
Â  Â  Â  Â  Â  Â  if (!_g2) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Authentication token not found!");
Â  Â  Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const _h2 = _g2.access_token;
Â  Â  Â  Â  Â  Â  const _i2 = await fetch(`https://www.googleapis.com/upload/drive/v3/files/${_d2}?uploadType=media`, {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'PATCH',
Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Authorization': `Bearer ${_h2}`,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json'
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  body: _f2
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  if (!_i2.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  const _j2 = await _i2.json();
Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(JSON.stringify(_j2));
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const _k2 = await _i2.json();
Â  Â  Â  Â  Â  Â  console.log(`File with ID ${_d2} updated successfully via fetch.`);
Â  Â  Â  Â  Â  Â  return _k2.id;
Â  Â  Â  Â  } catch (_l2) {
Â  Â  Â  Â  Â  Â  console.error("Error updating file with fetch:", _l2);
Â  Â  Â  Â  Â  Â  alert("Google Drive UPDATE Error: " + _l2.message);
Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  }
Â  Â  },
Â  Â  async getFileContent(_m2) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const _n2 = await gapi.client.drive.files.get({ fileId: _m2, alt: 'media' });
Â  Â  Â  Â  Â  Â  return _n2.result;
Â  Â  Â  Â  } catch (_o2) {
Â  Â  Â  Â  Â  Â  console.error("Error getting file content:", _o2);
Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  }
Â  Â  }
};
</script><script>
Â  Â  const GOOGLE_CLIENT_ID = '552980243748-g02kbg67f1r8ortovgh7ia975f46a8i6.apps.googleusercontent.com';
Â  Â 

Â  Â  let tokenClient;
Â  Â  let gapiInited = false;
Â  Â  let gisInited = false;

Â  Â  function gapiLoaded() {
Â  Â  Â  Â  gapi.load('client', initializeGapiClient);
Â  Â  }

Â  Â  function gisLoaded() {
Â  Â  Â  Â  tokenClient = google.accounts.oauth2.initTokenClient({
Â  Â  Â  Â  Â  Â  client_id: GOOGLE_CLIENT_ID,
Â  Â  Â  Â  Â  Â  scope: 'https://www.googleapis.com/auth/drive',
Â  Â  Â  Â  Â  Â  callback: '',
Â  Â  Â  Â  });
Â  Â  Â  Â  gisInited = true;
Â  Â  Â  Â  console.log("âœ… Google Identity Services (GIS) Initialized!");
Â  Â  Â  Â  checkAndSignalReady();
Â  Â  }

Â  Â  Â  Â  async function initializeGapiClient() {
Â  Â  Â  Â  await gapi.client.init({
Â  Â  Â  Â  Â  Â  discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],
Â  Â  Â  Â  });
Â  Â  Â  Â  gapiInited = true;
Â  Â  Â  Â  console.log("âœ… Google API Client Initialized!");
Â  Â  Â  Â  checkAndSignalReady();
Â  Â  }

Â  Â Â 
Â  Â  function checkAndSignalReady() {
Â  Â  Â  Â  if (gapiInited && gisInited) {
Â  Â  Â  Â  Â  Â  Â console.log("ðŸš€ Both Google libraries are ready!");
Â  Â  Â  Â  Â  Â  Â window.dispatchEvent(new CustomEvent('gapi-ready'));
Â  Â  Â  Â  }
Â  Â  }

let gapiAccessToken = null;


(async () => {
Â  Â  try {
Â  Â  Â  Â  gapiAccessToken = await window.chatbotStorage.getAuthToken();
Â  Â  Â  Â  if (gapiAccessToken) {
Â  Â  Â  Â  Â  Â  console.log("ðŸ”‘ Found existing Google Auth Token in IndexedDB.");
Â  Â  Â  Â  Â  Â  window.addEventListener('gapi-ready', () => {
Â  Â  Â  Â  Â  Â  Â  Â  gapi.client.setToken(gapiAccessToken);
Â  Â  Â  Â  Â  Â  Â  Â  console.log("ðŸš€ Existing token has been set in GAPI client.");
Â  Â  Â  Â  Â  Â  Â  Â  window.dispatchEvent(new CustomEvent('google-authed'));Â 
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  } catch (error) {
Â  Â  Â  Â  console.error("Error loading auth token:", error);
Â  Â  }
})();


function handleAuthClick() {
Â  Â  tokenClient.callback = async (_p2) => {
Â  Â  Â  Â  if (_p2.error !== undefined) {
Â  Â  Â  Â  Â  Â  throw (_p2);
Â  Â  Â  Â  }
Â  Â  Â  Â  gapiAccessToken = _p2;
Â  Â  Â  Â  gapi.client.setToken(gapiAccessToken);
Â  Â  Â  Â  await window.chatbotStorage.setAuthToken(gapiAccessToken);Â 
Â  Â  Â  Â  console.log("âœ… Google Sign-In Successful! Token saved and set in GAPI client.", gapiAccessToken);
Â  Â  Â  Â  window.dispatchEvent(new CustomEvent('google-authed'));
Â  Â  };

Â  Â  if (gapiAccessToken === null) {
Â  Â  Â  Â  tokenClient.requestAccessToken({ prompt: 'consent' });
Â  Â  } else {
Â  Â  Â  Â  google.accounts.oauth2.revoke(gapiAccessToken.access_token);
Â  Â  Â  Â  gapiAccessToken = null;
Â  Â  Â  Â  gapi.client.setToken(null);
Â  Â  Â  Â  window.chatbotStorage.removeAuthToken();
Â  Â  Â  Â  console.log("ðŸ”Œ Google Sign-Out Successful! Token removed from IndexedDB.");
Â  Â  Â  Â  window.dispatchEvent(new CustomEvent('google-signed-out'));
Â  Â  }
}
</script>
<script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
<script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script><script src='https://cdn.jsdelivr.net/npm/tesseract.js@2/dist/tesseract.min.js'></script><script type="importmap">
{
Â  "imports": {
Â  Â  "react": "https://esm.sh/react@18.3.1",
Â  Â  "react-dom/client": "https://esm.sh/react-dom@18.3.1/client",
Â  Â  "@google/generative-ai": "https://esm.sh/@google/generative-ai@0.20.0"
Â  }
}
</script></head>
<body class="bg-gray-200"><div id="root"></div><script type="text/babel" data-type="module">
Â  Â  Â  Â  import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';
Â  Â  Â  Â  import ReactDOM from 'react-dom/client';
Â  Â  Â  Â  import { GoogleGenerativeAI } from "@google/generative-ai";

Â  Â  Â  Â  const apiKeyManager = {
Â  dbName: 'ApiKeyStatusDB',
Â  storeName: 'deactivated_keys',
Â Â 
Â  async getDB() {
Â  Â  return new Promise((_p3, _q3) => {
Â  Â  Â  const _r3 = indexedDB.open(this.dbName, 1);
Â  Â  Â  _r3.onerror = () => _q3("Error opening DB");
Â  Â  Â  _r3.onsuccess = () => _p3(_r3.result);
Â  Â  Â  _r3.onupgradeneeded = _s3 => {
Â  Â  Â  Â  const _t3 = _s3.target.result;
Â  Â  Â  Â  _t3.createObjectStore(this.storeName, { keyPath: 'index' });
Â  Â  Â  };
Â  Â  });
Â  },

Â  async getDeactivatedKeys() {
Â  Â  const _u3 = await this.getDB();
Â  Â  return new Promise(_v3 => {
Â  Â  Â  const _w3 = _u3.transaction(this.storeName, 'readonly');
Â  Â  Â  const _x3 = _w3.objectStore(this.storeName);
Â  Â  Â  const _y3 = _x3.getAll();
Â  Â  Â  _y3.onsuccess = async () => {
Â  Â  Â  Â  const _z3 = Date.now();
Â  Â  Â  Â  const _a4 = 24 * 60 * 60 * 1000;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const _b4 = _y3.result.filter(_c4 => (_z3 - _c4.timestamp) > _a4);
Â  Â  Â  Â  for (const _d4 of _b4) {
Â  Â  Â  Â  Â  await this.activateKey(_d4.index);
Â  Â  Â  Â  }

Â  Â  Â  Â  const _e4 = _y3.result.filter(_f4 => (_z3 - _f4.timestamp) <= _a4);
Â  Â  Â  Â  _v3(_e4);
Â  Â  Â  };
Â  Â  });
Â  },

Â  async deactivateKey(_g4) {
Â  Â  const _h4 = await this.getDB();
Â  Â  const _i4 = _h4.transaction(this.storeName, 'readwrite');
Â  Â  const _j4 = _i4.objectStore(this.storeName);
Â  Â  _j4.put({ index: _g4, timestamp: Date.now() });
Â  },
Â Â 
Â  async activateKey(_k4) {
Â  Â  Â  const _l4 = await this.getDB();
Â  Â  Â  const _m4 = _l4.transaction(this.storeName, 'readwrite');
Â  Â  Â  const _n4 = _m4.objectStore(this.storeName);
Â  Â  Â  _n4.delete(_k4);
Â  }
};

Â  Â  Â  Â  let currentKeyIndex = 0;

Â  Â  Â  Â  const MessageSender = {
Â  Â  Â  Â  Â  Â  USER: 'user',
Â  Â  Â  Â  Â  Â  AI: 'ai',
Â  Â  Â  Â  };

Â  Â  Â  Â  const ActLike = {
Â  Â  Â  Â  Â  Â  FRIEND: 'Friend',
Â  Â  Â  Â  Â  Â  PROFESSIONAL: 'Professional',
Â  Â  Â  Â  };

Â  Â  Â  Â  const Expert = {
Â  Â  Â  Â  Â  Â  TAX_CONSULTANT: 'Tax Consultant',
Â  Â  Â  Â  Â  Â  GST_EXPERT: 'GST Expert',
Â  Â  Â  Â  Â  Â  STATUTORY_AUDITOR: 'Statutory Auditor',
Â  Â  Â  Â  Â  Â  INTERNAL_AUDITOR: 'Internal Auditor',
Â  Â  Â  Â  Â  Â  INVESTMENT_ADVISOR: 'Investment Advisor',
Â  Â  Â  Â  Â  Â  FINANCIAL_PLANNER: 'Financial Planner',
Â  Â  Â  Â  Â  Â  CORPORATE_ADVISOR: 'Corporate Advisor',
Â  Â  Â  Â  Â  Â  BANKING_EXPERT: 'Banking Expert',
Â  Â  Â  Â  Â  Â  INSURANCE_ADVISOR: 'Insurance Advisor',
Â  Â  Â  Â  Â  Â  MUTUAL_FUND_EXPERT: 'Mutual Fund Expert',
Â  Â  Â  Â  Â  Â  COMPANY_SECRETARY: 'Company Secretary',
Â  Â  Â  Â  Â  Â  COST_ACCOUNTANT: 'Cost Accountant',
Â  Â  Â  Â  Â  Â  FORENSIC_ACCOUNTANT: 'Forensic Accountant',
Â  Â  Â  Â  Â  Â  TRANSFER_PRICING_EXPERT: 'Transfer Pricing Expert',
Â  Â  Â  Â  Â  Â  IFRS_SPECIALIST: 'IFRS Specialist',
Â  Â  Â  Â  Â  Â  VALUATION_EXPERT: 'Valuation Expert',
Â  Â  Â  Â  Â  Â  COMPLIANCE_OFFICER: 'Compliance Officer',
Â  Â  Â  Â  Â  Â  RISK_MANAGEMENT_EXPERT: 'Risk Management Expert',
Â  Â  Â  Â  Â  Â  TREASURY_MANAGEMENT: 'Treasury Management',
Â  Â  Â  Â  Â  Â  EXPERT_ALL_FIELDS: 'Expert in All Fields',
Â  Â  Â  Â  };

Â  Â  Â  Â  const Gender = {
Â  Â  Â  Â  Â  Â  MALE: 'Male',
Â  Â  Â  Â  Â  Â  FEMALE: 'Female',
Â  Â  Â  Â  Â  Â  OTHER: 'Other',
Â  Â  Â  Â  };

Â  Â  Â  Â  const ChatType = {
Â  Â  Â  Â  Â  Â  SINGLE: 'single',
Â  Â  Â  Â  Â  Â  GROUP: 'group',
Â  Â  Â  Â  };
Â  Â  Â  Â Â 
Â  Â  Â  Â  const _f5 = (_g5, _h5, _i5 = 300000) => {
Â  Â  Â  Â  Â  let _j5;
Â  Â  Â  Â  Â  return () => {
Â  Â  Â  Â  Â  Â  clearTimeout(_j5);
Â  Â  Â  Â  Â  Â  _j5 = setTimeout(async () => {
Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  if (_g5 === 'userProfile') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  await window.chatbotStorage.setUserProfile(_h5);
Â  Â  Â  Â  Â  Â  Â  Â  } else if (_g5 === 'characters') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  await window.chatbotStorage.setCharacters(_h5);
Â  Â  Â  Â  Â  Â  Â  Â  } else if (_g5 === 'groups') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  await window.chatbotStorage.setGroups(_h5);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Saved ${_g5} after ${_i5 / 1000 / 60} min idle to IndexedDB.`);
Â  Â  Â  Â  Â  Â  Â  } catch (_k5) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error(`Save failed for ${_g5}:`, _k5);
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }, _i5);
Â  Â  Â  Â  Â  };
Â  Â  Â  Â  };

Â  Â  Â  Â  const _l5 = (_m5) => /tax|slab|income|fy \d{2}-\d{2}/i.test(_m5.toLowerCase());

Â  Â  Â  Â  const DEFAULT_AVATARS = {
Â  Â  Â  Â  Â  Â  'Male': [
Â  Â  Â  Â  Â  Â  Â  Â  '01_CABOY.png',
Â  Â  Â  Â  Â  Â  Â  Â  '02_CABOY.jpg'
Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  'Female': [
Â  Â  Â  Â  Â  Â  Â  Â  '01_CAGIRL.png',
Â  Â  Â  Â  Â  Â  Â  Â  '02_CAGIRL.png'
Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  'Other': []
Â  Â  Â  Â  };

Â  Â  Â  Â  const _n5 = (_o5) => {
Â  Â  Â  Â  Â  return _o5.map(_p5 => ({
Â  Â  Â  Â  Â  Â  role: _p5.sender === MessageSender.USER ? 'user' : 'model',
Â  Â  Â  Â  Â  Â  parts: [{ text: _p5.text }]
Â  Â  Â  Â  Â  }));
Â  Â  Â  Â  };

const generateChatResponseStream = async (_q5, _r5, _s5, _t5, _u5, onBlock, keyIndex) => {Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â const _v5 = await fetch('/api/chat', {
Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  body: JSON.stringify({
Â  Â  Â  Â  Â  Â  history: _n5(_s5.slice(0, -1)),
Â  Â  Â  Â  Â  Â  message: _t5.text,
Â  Â  Â  Â  Â  Â  keyIndex: keyIndex,
Â  Â  Â  Â  Â  Â  chatType: 'single',
Â  Â  Â  Â  Â  Â  character: _q5,
Â  Â  Â  Â  Â  Â  userProfile: _r5
Â  Â  Â  Â  }),
Â  Â  });
Â  Â  return _v5;
};

const generateGroupChatResponseStream = async (_w5, _x5, _y5, _z5, _a6, _b6, onBlock, keyIndex) => {
Â  Â  const _c6 = _y5.slice(0, -1).map(_d6 => {
Â  Â  Â  Â  const _e6 = _d6.sender === 'user' ? _x5.name : _w5.find(_f6 => _f6.id === _d6.sender)?.name || 'Unknown';
Â  Â  Â  Â  return { role: 'user', parts: [{ text: `${_e6}: ${_d6.text}` }] };
Â  Â  });
Â  Â Â 
Â  Â  const _g6 = _z5.text.startsWith('[System:')Â 
Â  Â  Â  Â  ? _z5.textÂ 
Â  Â  Â  Â  : `User: ${_z5.text}\n\nContinue the group conversation following the rules and format exactly.`;
Â  Â Â 
Â  Â  const _h6 = await fetch('/api/chat', {
Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  body: JSON.stringify({
Â  Â  Â  Â  Â  Â  history: _c6,
Â  Â  Â  Â  Â  Â  message: _g6,
Â  Â  Â  Â  Â  Â  keyIndex: keyIndex,
Â  Â  Â  Â  Â  Â  chatType: 'group',
Â  Â  Â  Â  Â  Â  userProfile: _x5,
Â  Â  Â  Â  Â  Â  groupMembers: _w5,
Â  Â  Â  Â  Â  Â  consecutiveSkips: _b6
Â  Â  Â  Â  }),
Â  Â  });

Â  Â  return _h6;
};

Â  Â  Â  Â  const UserProfileSetup = ({ userProfile: _i6, onSave: _j6, onCancel: _k6, isInitialSetup: _l6 = false }) => {
Â  Â  Â  Â  Â  const [_m6, _n6] = useState({
Â  Â  Â  Â  Â  Â  Â  ..._i6,
Â  Â  Â  Â  Â  Â  Â  name: _i6.name || 'Alex',
Â  Â  Â  Â  Â  Â  Â  age: _i6.age || 25,
Â  Â  Â  Â  Â  Â  Â  gender: _i6.gender || Gender.MALE
Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  const _o6 = (_p6) => {
Â  Â  Â  Â  Â  Â  if (_p6.target.files && _p6.target.files[0]) {
Â  Â  Â  Â  Â  Â  Â  const _q6 = _p6.target.files[0];
Â  Â  Â  Â  Â  Â  Â  const _r6 = new FileReader();
Â  Â  Â  Â  Â  Â  Â  _r6.onload = (_s6) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (_s6.target && typeof _s6.target.result === 'string') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  _n6(_t6 => ({ ..._t6, avatar: _s6.target.result }));
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  _r6.readAsDataURL(_q6);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const _u6 = (_v6) => {
Â  Â  Â  Â  Â  Â  _v6.preventDefault();
Â  Â  Â  Â  Â  Â  if (!_m6.name) {
Â  Â  Â  Â  Â  Â  Â  Â  alert("Please enter your name.");
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  _j6(_m6);
Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <div className="flex flex-col h-full bg-blue-50">
Â  Â  Â  Â  Â  Â  Â  Â  <header className="bg-blue-600 text-white p-4 pt-8 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 className="text-2xl font-bold">Virtual Chartered Accountants</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm opacity-90">First, let's set up your profile.</p>
Â  Â  Â  Â  Â  Â  Â  Â  </header>
Â  Â  Â  Â  Â  Â  Â  Â  <main className="flex-grow bg-white rounded-t-2xl p-4 overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form onSubmit={_u6} className="p-6 space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl font-bold text-center text-gray-700">Your Profile</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-col items-center space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  src={_m6.avatar || `https://i.pravatar.cc/150?u=${_m6.id}`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alt="Your avatar"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-24 h-24 rounded-full object-cover border-2 border-gray-300"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="cursor-pointer text-sm text-blue-600 hover:underline">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Change Picture
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" accept="image/*" onChange={_o6} className="hidden" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700 text-center">Or select a default avatar:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-2 flex flex-wrap justify-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {[...DEFAULT_AVATARS['Male'], ...DEFAULT_AVATARS['Female'], ...DEFAULT_AVATARS['Other']].map((_w6, _x6) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={_x6}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  src={_w6}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alt={`Avatar ${_x6 + 1}`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className={`w-16 h-16 rounded-full object-cover cursor-pointer border-4 ${_m6.avatar === _w6 ? 'border-blue-600' : 'border-gray-200'}`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _n6(_y6 => ({ ..._y6, avatar: _w6 }))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Your Name *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="text"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_m6.name}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_z6 => _n6({ ..._m6, name: _z6.target.value })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="Alex"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  required
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Age (Optional)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="number"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_m6.age || ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_a7 => _n6({ ..._m6, age: parseInt(_a7.target.value) || null })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="25"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Gender</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_m6.gender || ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_b7 => _n6({ ..._m6, gender: _b7.target.value })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Select Gender (Optional)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {Object.values(Gender).map(_c7 => <option key={_c7} value={_c7}>{_c7}</option>)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-end space-x-2 pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {!_l6 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_k6}Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Cancel
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="submit"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_l6 ? "Save Profile" : "Save Profile"}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  </main>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  )
Â  Â  Â  Â  }

const FileIcon = ({ fileType: _d7 }) => {
Â  Â  let _e7 = <path fillRule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clipRule="evenodd" />;
Â  Â  if (_d7.includes('pdf')) {
Â  Â  Â  Â  _e7 = <path fillRule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4zm2 2a1 1 0 00-1 1v1a1 1 0 102 0V7a1 1 0 00-1-1zm3 0a1 1 0 00-1 1v1a1 1 0 102 0V7a1 1 0 00-1-1zm3 0a1 1 0 00-1 1v1a1 1 0 102 0V7a1 1 0 00-1-1zm-6 5a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1zm3 0a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1zm3 0a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1z" clipRule="evenodd" />;
Â  Â  } else if (_d7.includes('spreadsheet') || _d7.includes('excel') || _d7.includes('csv')) {
Â  Â  Â  Â  _e7 = <path fillRule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v2H5V4zm0 4h10v2H5V8zm0 4h10v2H5v-2z" clipRule="evenodd" />;
Â  Â  } else if (_d7.includes('word')) {
Â  Â  Â  Â  _e7 = <path fillRule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v2H5V4zm0 4h10v2H5V8zm0 4h10v2H5v-2z" clipRule="evenodd" />;
Â  Â  }
Â  Â  return (
Â  Â  Â  Â  <svg className="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
Â  Â  Â  Â  Â  Â  {_e7}
Â  Â  Â  Â  </svg>
Â  Â  );
};

Â  Â  Â  const MessageInput = ({ onSend: _f7, onSkip: _g7, isBlocked: _h7 }) => {
Â  Â  const [_i7, _j7] = useState('');
Â  Â  const [_k7, _l7] = useState([]);
Â  Â  const _m7 = useRef(null);

Â  Â  const _n7 = () => {
Â  Â  Â  Â  const _o7 = _k7.filter(_p7 => _p7.status === 'ready');
Â  Â  Â  Â  if (_i7.trim() || _o7.length > 0) {
Â  Â  Â  Â  Â  Â  _f7(_i7.trim(), _o7);
Â  Â  Â  Â  Â  Â  _j7('');
Â  Â  Â  Â  Â  Â  _l7([]);
Â  Â  Â  Â  }
Â  Â  };

Â  Â  const _q7 = (_r7) => {
Â  Â  Â  Â  const _s7 = Array.from(_r7.target.files);
Â  Â  Â  Â  const _t7 = [
Â  Â  Â  Â  Â  Â  'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
Â  Â  Â  Â  Â  Â  'text/csv', 'text/plain', 'application/json', 'text/html',
Â  Â  Â  Â  Â  Â  'application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
Â  Â  Â  Â  Â  Â  'image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp',
Â  Â  Â  Â  ];

Â  Â  Â  Â  const _u7 = _s7.filter(_v7 => {
Â  Â  Â  Â  Â  Â  const _w7 = _t7.includes(_v7.type) ||
Â  Â  Â  Â  Â  Â  Â  Â  _v7.name.toLowerCase().match(/\.(xlsx?|csv|txt|json|html?|pdf|docx?|jpe?g|png|gif|webp)$/i);
Â  Â  Â  Â  Â  Â  if (!_w7) {
Â  Â  Â  Â  Â  Â  Â  Â  alert(`File "${_v7.name}" is not supported.`);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return _w7 && _v7.size <= 50 * 1024 * 1024;
Â  Â  Â  Â  });

Â  Â  Â  Â  if (_u7.length > 0) {
Â  Â  Â  Â  Â  Â  const _x7 = _u7.map(_y7 => {
Â  Â  Â  Â  Â  Â  Â  Â  const _z7 = Date.now() + Math.random();
Â  Â  Â  Â  Â  Â  Â  Â  _l7(_a8 => [..._a8, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id: _z7,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: _y7.name,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  size: _y7.size,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: _y7.type,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  status: 'reading',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  preview: null
Â  Â  Â  Â  Â  Â  Â  Â  }]);
Â  Â  Â  Â  Â  Â  Â  Â  return { file: _y7, fileId: _z7 };
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  _x7.forEach(({ file: _b8, fileId: _c8 }) => {
Â  Â  Â  Â  Â  Â  Â  Â  const _d8 = new Promise((_e8, _f8) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _g8 = new FileReader();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _h8 = _b8.name.toLowerCase().match(/\.(xlsx?)$/i);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _i8 = _b8.type === 'application/pdf';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _j8 = _b8.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' || _b8.name.toLowerCase().endsWith('.docx');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _k8 = _b8.type.startsWith('image/');
Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (_h8) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _g8.onload = (_l8) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _m8 = XLSX.read(new Uint8Array(_l8.target.result), { type: 'array' });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let _n8 = '';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _m8.SheetNames.forEach(_o8 => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _n8 += `\n\n--- Sheet: ${_o8} ---\n\n`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _p8 = _m8.Sheets[_o8];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _q8 = XLSX.utils.sheet_to_csv(_p8);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _n8 += _q8;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _e8({ content: _n8, type: 'text/csv' });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â } catch (_r8) { _f8(_r8); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _g8.readAsArrayBuffer(_b8);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (_i8) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â _g8.onload = async (_s8) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const _t8 = await pdfjsLib.getDocument({ data: new Uint8Array(_s8.target.result) }).promise;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â let _u8 = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â for (let _v8 = 1; _v8 <= _t8.numPages; _v8++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const _w8 = await _t8.getPage(_v8);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const _x8 = await _w8.getTextContent();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â _u8 += _x8.items.map(_y8 => _y8.str).join(' ') + '\n';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â _e8({ content: _u8, type: _b8.type });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â } catch (_z8) { _f8(_z8); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â _g8.readAsArrayBuffer(_b8);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (_j8) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _g8.onload = async (_a9) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const _b9 = await mammoth.extractRawText({ arrayBuffer: _a9.target.result });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â _e8({ content: _b9.value, type: _b8.type });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â } catch (_c9) { _f8(_c9); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _g8.readAsArrayBuffer(_b8);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (_k8) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _g8.onload = async (_d9) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const _e9 = await Tesseract.recognize(_d9.target.result, 'eng');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â _e8({ content: _e9.data.text, preview: _d9.target.result });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â } catch (_f9) { _f8(_f9); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _g8.readAsDataURL(_b8);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _g8.onload = (_g9) => _e8({ content: _g9.target.result, type: _b8.type });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _g8.readAsText(_b8);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  _d8.then(_h9 => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _l7(_i9 => _i9.map(_j9 =>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _j9.id === _c8 ? { ..._j9, status: 'ready', content: _h9.content, preview: _h9.preview || _j9.preview, type: _h9.type || _j9.type } : _j9
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ));
Â  Â  Â  Â  Â  Â  Â  Â  }).catch(_k9 => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error reading file:', _b8.name, _k9);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _l7(_l9 => _l9.map(_m9 =>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _m9.id === _c8 ? { ..._m9, status: 'error' } : _m9
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ));
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  _r7.target.value = '';
Â  Â  };

Â  Â  const _n9 = (_o9) => {
Â  Â  Â  Â  _l7(_p9 => _p9.filter(_q9 => _q9.id !== _o9));
Â  Â  };

Â  Â  const _r9 = (_s9) => {
Â  Â  Â  Â  if (_s9 === 0) return '0 Bytes';
Â  Â  Â  Â  const _t9 = 1024;
Â  Â  Â  Â  const _u9 = ['Bytes', 'KB', 'MB', 'GB'];
Â  Â  Â  Â  const _v9 = Math.floor(Math.log(_s9) / Math.log(_t9));
Â  Â  Â  Â  return parseFloat((_s9 / Math.pow(_t9, _v9)).toFixed(2)) + ' ' + _u9[_v9];
Â  Â  };

Â  Â  return (
Â  Â  Â  Â  <footer className="chat-footer bg-white border-t border-gray-300">
Â  Â  Â  Â  Â  Â  {_k7.length > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="p-3 border-b border-gray-200 bg-gray-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-wrap gap-2 max-h-32 overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_k7.map(_w9 => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={_w9.id} className="relative bg-white border border-gray-300 rounded-lg p-2 flex items-center gap-2 max-w-xs">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_w9.preview ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src={_w9.preview} alt={_w9.name} className="w-8 h-8 object-cover rounded" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={`w-8 h-8 rounded flex items-center justify-center ${_w9.status === 'error' ? 'bg-red-500' : 'bg-blue-500'}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <FileIcon fileType={_w9.type} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex-1 min-w-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs font-medium text-gray-900 truncate">{_w9.name}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs text-gray-500">{_r9(_w9.size)}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-5 h-5 flex items-center justify-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_w9.status === 'reading' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_w9.status === 'ready' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg className="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_w9.status === 'error' && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg className="w-4 h-4 text-red-500" fill="currentColor" viewBox="0 0 20 20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clipRule="evenodd" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _n9(_w9.id)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-1 hover:bg-gray-200 rounded-full transition-colors"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg className="w-3 h-3 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path fillRule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clipRule="evenodd" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div className="p-3 flex items-center gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="file"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ref={_m7}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_q7}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  multiple
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  accept=".xlsx,.xls,.csv,.txt,.json,.html,.htm,.pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.webp"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="hidden"
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _m7.current?.click()}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-2 text-gray-400 hover:text-gray-600 transition-colors"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  disabled={_h7}
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex-grow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="text"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_i7}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_x9 => _j7(_x9.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onKeyPress={_y9 => _y9.key === 'Enter' && _n7()}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder={_h7 ? "You are blocked" : "Message..."}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full px-4 py-3 bg-gray-100 border border-transparent rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  disabled={_h7}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  {_g7 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={_g7} className="p-2 text-white bg-gray-600 hover:bg-gray-700 rounded-full transition-colors" disabled={_h7}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_n7}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className={`p-3 text-white rounded-full transition-colors ${
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (_i7.trim() || _k7.some(_z9 => _z9.status === 'ready')) && !_h7 ? 'bg-blue-600 hover:bg-blue-700' : 'bg-gray-400 cursor-not-allowed'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  disabled={!(_i7.trim() || _k7.some(_a10 => _a10.status === 'ready')) || _h7}
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </footer>
Â  Â  );
};
Â  Â  Â  Â Â 
const _b10 = (_c10) => {
Â  if (_c10.length < 2) return null;

Â  const _d10 = _c10[0].split('|').map(_e10 => _e10.trim()).filter(_f10 => _f10);
Â Â 
Â  const _g10 = _c10.slice(2).map(_h10 =>
Â  Â  _h10.split('|').map(_i10 => _i10.trim()).filter(_j10 => _j10)
Â  ).filter(_k10 => _k10.length > 0 && _k10.some(_l10 => _l10.length > 0));

Â  if (_d10.length > 0 && _g10.length > 0) {
Â  Â  return { headers: _d10, rows: _g10 };
Â  }
Â  return null;
};

const _m10 = (_n10) => {
Â  const _o10 = [];
Â  const _p10 = _n10.split('\n');
Â  let _q10 = [];

Â  for (let _r10 = 0; _r10 < _p10.length; _r10++) {
Â  Â  const _s10 = _p10[_r10].trim();

Â  Â  if (_s10.startsWith('|') && _s10.endsWith('|')) {
Â  Â  Â  if (_q10.length > 0) {
Â  Â  Â  Â  _o10.push({ type: 'text', content: _q10.join('\n') });
Â  Â  Â  Â  _q10 = [];
Â  Â  Â  }

Â  Â  Â  const _t10 = [];
Â  Â  Â  while (_r10 < _p10.length && _p10[_r10].trim().startsWith('|') && _p10[_r10].trim().endsWith('|')) {
Â  Â  Â  Â  _t10.push(_p10[_r10]);
Â  Â  Â  Â  _r10++;
Â  Â  Â  }
Â  Â  Â  _r10--;

Â  Â  Â  const _u10 = _b10(_t10);
Â  Â  Â  if (_u10) {
Â  Â  Â  Â  _o10.push({ type: 'table', data: _u10 });
Â  Â  Â  } else {
Â  Â  Â  Â  _q10.push(..._t10);
Â  Â  Â  }
Â  Â  } else {
Â  Â  Â  _q10.push(_p10[_r10]);
Â  Â  }
Â  }

Â  if (_q10.length > 0) {
Â  Â  _o10.push({ type: 'text', content: _q10.join('\n') });
Â  }

Â  return _o10;
};


const DataTable = ({ headers: _v10, rows: _w10 }) => {
Â  const [_x10, _y10] = React.useState(false);

Â  const _z10 = () => {
Â  Â  let _a11 = _v10.join('\t') + '\n';
Â  Â  _a11 += _w10.map(_b11 => _b11.join('\t')).join('\n');
Â  Â Â 
Â  Â  navigator.clipboard.writeText(_a11).then(() => {
Â  Â  Â  _y10(true);
Â  Â  Â  setTimeout(() => _y10(false), 2000);
Â  Â  });
Â  };

Â  return (
Â  Â  <div className="mt-2 text-sm text-gray-800">
Â  Â  Â  <div className="overflow-x-auto border border-gray-300 rounded-lg bg-gray-50">
Â  Â  Â  Â  <table className="min-w-full divide-y divide-gray-200">
Â  Â  Â  Â  Â  <thead className="bg-gray-100">
Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  {_v10.map((_c11, _d11) => (
Â  Â  Â  Â  Â  Â  Â  Â  <th key={_d11} className="px-4 py-2 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">
Â  Â  Â  Â  Â  Â  Â  Â  Â  {_c11}
Â  Â  Â  Â  Â  Â  Â  Â  </th>
Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  </thead>
Â  Â  Â  Â  Â  <tbody className="bg-white divide-y divide-gray-200">
Â  Â  Â  Â  Â  Â  {_w10.map((_e11, _f11) => (
Â  Â  Â  Â  Â  Â  Â  <tr key={_f11} className={_f11 % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>
Â  Â  Â  Â  Â  Â  Â  Â  {_e11.map((_g11, _h11) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <td key={_h11} className="px-4 py-2 whitespace-nowrap">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_g11}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  Â  </table>
Â  Â  Â  </div>
Â  Â  Â  <div className="flex justify-end mt-2">
Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  onClick={_z10}
Â  Â  Â  Â  Â  className={`fl items-center gap-1 px-3 py-1 text-xs rounded-full transition-colors ${
Â  Â  Â  Â  Â  Â  _x10Â 
Â  Â  Â  Â  Â  Â  Â  ? 'bg-green-100 text-green-700'Â 
Â  Â  Â  Â  Â  Â  Â  : 'bg-blue-100 text-blue-700 hover:bg-blue-200'
Â  Â  Â  Â  Â  }`}
Â  Â  Â  Â  >
Â  Â  Â  Â  Â  {_x10 ? 'Copied!' : 'Copy Table'}
Â  Â  Â  Â  </button>
Â  Â  Â  </div>
Â  Â  </div>
Â  );
};

const MessageBubble = ({ message: _i11, characterProfile: _j11, userProfile: _k11, characters: _l11, onEdit: _m11, onDelete: _n11 }) => {
Â  Â  const _o11 = _i11.sender === MessageSender.USER;
Â  Â  const [_p11, _q11] = React.useState(false);
Â  Â  const [_r11, _s11] = React.useState(_i11.text);
Â  Â  const [_t11, _u11] = React.useState(false);
Â  Â  const _v11 = React.useRef(null);

Â  Â  const _w11 = () => {
Â  Â  Â  Â  if (_m11) {
Â  Â  Â  Â  Â  Â  _m11(_i11.id, _r11);
Â  Â  Â  Â  }
Â  Â  Â  Â  _q11(false);
Â  Â  };

Â  Â  const _x11 = () => {
Â  Â  Â  Â  _q11(false);
Â  Â  Â  Â  _s11(_i11.text);
Â  Â  };

Â  Â  const _y11 = (_z11) => {
Â  Â  Â  Â  _z11.preventDefault();
Â  Â  Â  Â  if (_o11) {
Â  Â  Â  Â  Â  Â  _u11(true);
Â  Â  Â  Â  }
Â  Â  };

Â  Â  React.useEffect(() => {
Â  Â  Â  Â  const _a12 = (_b12) => {
Â  Â  Â  Â  Â  Â  if (_v11.current && !_v11.current.contains(_b12.target)) {
Â  Â  Â  Â  Â  Â  Â  Â  _u11(false);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };
Â  Â  Â  Â  document.addEventListener("mousedown", _a12);
Â  Â  Â  Â  return () => {
Â  Â  Â  Â  Â  Â  document.removeEventListener("mousedown", _a12);
Â  Â  Â  Â  };
Â  Â  }, [_v11]);

Â  Â  const _c12 = _o11 ?
Â  Â  Â  Â  _k11 :
Â  Â  Â  Â  (_l11 && _l11.find(_d12 => _d12.id === _i11.sender)) || _j11;

Â  Â  const _e12 = _o11 ? _k11.avatar : _c12?.avatars?.[_c12?.activeAvatarIndex || 0];
Â  Â  const _f12 = _o11 ? `https://i.pravatar.cc/150?u=${_k11.id}` : `https://i.pravatar.cc/150?u=${_c12?.id}`;
Â  Â  const _g12 = _o11 ? null : _c12?.name;

Â  Â  const _h12 = (_i12) => {
Â  Â  Â  Â  const _j12 = new Date(_i12);
Â  Â  Â  Â  const _k12 = _j12.getHours().toString().padStart(2, '0');
Â  Â  Â  Â  const _l12 = _j12.getMinutes().toString().padStart(2, '0');
Â  Â  Â  Â  return `${_k12}:${_l12}`;
Â  Â  };

Â  Â  const _m12 = (_n12) => {
Â  Â  Â  Â  return _n12.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
Â  Â  };

Â  Â  const _o12 = _o11 ? [{ type: 'text', content: _i11.text }] : _m10(_i11.text);

Â  Â  const _p12 = (_q12) => {
Â  Â  Â  Â  if (!_q12) return '';
Â  Â  Â  Â  if (_q12 === 0) return '0 Bytes';
Â  Â  Â  Â  const _r12 = 1024;
Â  Â  Â  Â  const _s12 = ['Bytes', 'KB', 'MB', 'GB'];
Â  Â  Â  Â  const _t12 = Math.floor(Math.log(_q12) / Math.log(_r12));
Â  Â  Â  Â  return parseFloat((_q12 / Math.pow(_r12, _t12)).toFixed(2)) + ' ' + _s12[_t12];
Â  Â  };

Â  Â  return (
Â  Â  Â  Â  <div className={`flex items-end gap-2 mb-1 ${_o11 ? 'justify-end' : 'justify-start'}`}>
Â  Â  Â  Â  Â  Â  {_c12 && (
Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  src={_e12 || _f12}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alt={_o11 ? 'Your avatar' : _c12.name}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-8 h-8 rounded-full object-cover flex-shrink-0"
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  Â  onContextMenu={_y11}
Â  Â  Â  Â  Â  Â  Â  Â  className={`relative group ${_o12.some(_u12 => _u12.type === 'table') ? 'max-w-full md:max-w-4xl' : 'max-w-sm md:max-w-md'}`}
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  <div className={`px-4 py-3 rounded-2xl shadow-lg border ${
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _o11 ? 'bg-gradient-to-r from-blue-500 to-blue-600 text-white border-blue-400' : 'bg-white text-gray-800 border-gray-200 shadow-md'
Â  Â  Â  Â  Â  Â  Â  Â  }`}>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_i11.attachments && _i11.attachments.length > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mb-2 space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_i11.attachments.map(_v12 => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={_v12.id} className={`p-2 rounded-lg flex items-center gap-3 ${_o11 ? 'bg-blue-700/50' : 'bg-gray-100'}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_v12.preview ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src={_v12.preview} alt={_v12.name} className="w-10 h-10 object-cover rounded-md flex-shrink-0" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={`w-10 h-10 rounded-md flex items-center justify-center flex-shrink-0 ${_o11 ? 'bg-blue-500' : 'bg-gray-500'}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <FileIcon fileType={_v12.type} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex-1 min-w-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className={`text-sm font-medium truncate ${_o11 ? 'text-white' : 'text-gray-800'}`}>{_v12.name}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className={`text-xs ${_o11 ? 'text-blue-100' : 'text-gray-500'}`}>{_p12(_v12.size)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_p11 ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_r11}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_w12 => _s11(_w12.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full p-2 border border-gray-300 rounded text-gray-800 resize-none"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rows={3}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  autoFocus
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_w11}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Save
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_x11}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="px-3 py-1 bg-gray-500 text-white rounded text-sm hover:bg-gray-600"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Cancel
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_o12.map((_x12, _y12) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (_x12.type === 'table') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <DataTable
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={_y12}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers={_x12.data.headers}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rows={_x12.data.rows}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (_x12.content.trim()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={_y12}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="whitespace-pre-wrap"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dangerouslySetInnerHTML={{ __html: _m12(_x12.content) }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className={`flex items-center justify-between mt-1 ${
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _o11 ? 'text-blue-100' : 'text-gray-500'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {!_o11 && _g12 && <span className="text-xs font-bold">{_g12}</span>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-xs ml-2">{_h12(_i11.timestamp)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_o11 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg className="w-4 h-4 ml-2" fill="currentColor" viewBox="0 0 20 20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  {_t11 && _o11 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ref={_v11}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[120px]"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_z12 => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _z12.stopPropagation();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _q11(true);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _u11(false);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Edit
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_a13 => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _a13.stopPropagation();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (confirm('Are you sure you want to delete this message?')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _n11 && _n11(_i11.id);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _u11(false);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Delete
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  );
};

const MessageList = ({Â 
Â  Â  messages: _b13, character: _c13, userProfile: _d13, characters: _e13, isTyping: _f13, backgroundUrl: _g13,Â 
Â  Â  streamingText: _h13 = '', onEditMessage: _i13, onDeleteMessage: _j13,
Â  Â  isBlocked: _k13, blockCount: _l13, handleUnblock: _m13, characterName: _n13, groupName: _o13
}) => {
Â  const _p13 = useRef(null);
Â  const _q13 = 'https://i.redd.it/qwd83nc4xxf41.jpg';

Â  useEffect(() => {
Â  Â  _p13.current?.scrollIntoView({ behavior: 'smooth' });
Â  }, [_b13, _f13]);
Â Â 
Â  const _r13 = {
Â  Â  backgroundImage: `url('${_g13 || _q13}')`,
Â  Â  backgroundSize: 'cover',
Â  Â  backgroundPosition: 'center',
Â  };

Â  const _s13 = () => {
Â  Â return _b13.map(_t13 => (
Â  Â  Â  <MessageBubble
Â  Â  Â  Â  key={_t13.id}
Â  Â  Â  Â  message={_t13}
Â  Â  Â  Â  characterProfile={_c13}
Â  Â  Â  Â  userProfile={_d13}
Â  Â  Â  Â  characters={_e13}
Â  Â  Â  Â  onEdit={_i13}Â 
Â  Â  Â  Â  onDelete={_j13}Â 
Â  Â  Â  />
Â  Â  ));
Â  };

Â   return (
Â  Â  <main className="message-container" style={_r13}>
Â  Â  Â Â 
Â  Â  Â  {_k13 && (
Â  Â  Â  Â  <div className="sticky top-0 z-10 p-4">
Â  Â  Â  Â  Â  Â  <div className="text-center p-4 bg-red-100 border border-red-400 text-red-700 rounded-md shadow-lg">
Â  Â  Â  Â  Â  Â  Â  Â  <p className="font-bold">You are blocked by {_n13 || _o13} ðŸ˜£</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm">You have {3 - _l13} unblock attempt(s) remaining.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_m13}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-2 px-4 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600 text-sm"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Request Unblock
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  )}
Â  Â  Â Â 
Â  Â  Â  <div className="space-y-2 p-4">
Â  Â  Â  Â  {_s13()}
Â  Â  Â  Â  {_f13 && (
Â  Â  Â  Â  Â  <div className="flex justify-start items-end gap-2">
Â  Â  Â  Â  Â  Â  {(_e13 && _e13.length <= 1) && (
Â  Â  Â  Â  Â  Â  Â  <img src={_c13?.avatars?.[_c13?.activeAvatarIndex] || `https://i.pravatar.cc/150?u=${_c13?.id}`} alt="ai" className="w-8 h-8 rounded-full object-cover" />
Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  <div className={`bg-white rounded-2xl p-3 max-w-xs shadow ${(_e13 && _e13.length > 1) ? 'ml-0' : ''}`}>
Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-center space-x-1">
Â  Â  Â  Â  Â  Â  Â  Â  <span className="w-2 h-2 bg-gray-400 rounded-full animate-pulse delay-0"></span>
Â  Â  Â  Â  Â  Â  Â  Â  <span className="w-2 h-2 bg-gray-400 rounded-full animate-pulse delay-150"></span>
Â  Â  Â  Â  Â  Â  Â  Â  <span className="w-2 h-2 bg-gray-400 rounded-full animate-pulse delay-300"></span>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  )}
Â  Â  Â  Â  <div ref={_p13} />
Â  Â  Â  </div>
Â  Â  </main>
Â  );
};

Â  Â  Â  Â  const BackgroundModal = ({ isOpen: _u13, onClose: _v13, onSetBackground: _w13 }) => {
Â  Â  Â  Â  Â  Â  const _x13 = useRef(null);

Â  Â  Â  Â  Â  Â  if (!_u13) return null;

Â  Â  Â  Â  Â  Â  const _y13 = (_z13) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (_z13.target.files && _z13.target.files[0]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _a14 = _z13.target.files[0];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _b14 = new FileReader();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _b14.onload = (_c14) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (_c14.target && typeof _c14.target.result === 'string') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â _w13(_c14.target.result);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _b14.readAsDataURL(_a14);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  _v13();
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white rounded-lg p-6 w-full max-w-md">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="text-lg font-bold mb-4">Background Settings</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700 mb-2">Upload Background Image</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _x13.current?.click()}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full py-2 px-4 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Choose file
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="file"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ref={_x13}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  accept="image/*"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_y13}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="hidden"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-xs text-gray-500 mt-1">Max size: 10MB</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-end space-x-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_v13}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 text-gray-600 hover:text-gray-800"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Cancel
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _x13.current?.click()}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Save Background
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  };

Â  Â  Â  Â  const ChatHeader = ({ character: _d14, onBack: _e14, onEditAiProfile: _f14, onEditUserProfile: _g14, onClearChat: _h14, onSetBackground: _i14 }) => {
Â  Â  Â  Â  Â  const [_j14, _k14] = useState(false);

Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  <header className="fixed-header bg-blue-600 text-white p-3 flex items-center shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={_e14} className="p-2 rounded-full hover:bg-white/20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <divÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="flex items-center ml-2 cursor-pointer flex-grow"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_f14}
Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  src={_d14.avatars[_d14.activeAvatarIndex] || `https://i.pravatar.cc/150?u=${_d14.id}`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alt={_d14.name}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-10 h-10 rounded-full object-cover"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="ml-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="font-semibold text-lg">{_d14.name}</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm opacity-90">{_d14.actLike} â€¢ {_d14.expertise.includes('Tax Consultant') ? 'Tax Consultant' : _d14.expertise[0] || 'General CA'}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center space-x-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _k14(true)}Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-2 rounded-full hover:bg-white/20"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title="Background"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-xl">ðŸŽ¨</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_g14}Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-2 rounded-full hover:bg-white/20"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title="Profile"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-xl">ðŸ‘¤</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_h14}Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-2 rounded-full hover:bg-white/20"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title="Clear Chat"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </header>
Â  Â  Â  Â  Â  Â  Â  Â  <BackgroundModal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isOpen={_j14}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClose={() => _k14(false)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSetBackground={_i14}
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  };

Â  Â  Â  Â const CharacterSetup = ({ initialCharacter: _l14, onSave: _m14, onCancel: _n14 }) => {
Â  Â  Â  Â  Â  const _o14 = () => {
Â  Â  Â  Â  Â  Â  const _p14 = _l14.avatars?.length > 0;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const _q14 = _p14
Â  Â  Â  Â  Â  Â  Â  ? _l14.avatarsÂ 
Â  Â  Â  Â  Â  Â  Â  : [...DEFAULT_AVATARS['Male'], ...DEFAULT_AVATARS['Female'], ...DEFAULT_AVATARS['Other']];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  let _r14 = 0;
Â  Â  Â  Â  Â  Â  if (_p14) {
Â  Â  Â  Â  Â  Â  Â  Â  _r14 = _l14.activeAvatarIndex;
Â  Â  Â  Â  Â  Â  } else if (_l14.defaultAvatar) {
Â  Â  Â  Â  Â  Â  Â  Â  const _s14 = _q14.indexOf(_l14.defaultAvatar);
Â  Â  Â  Â  Â  Â  Â  Â  if (_s14 !== -1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _r14 = _s14;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  Â  Â  ..._l14,
Â  Â  Â  Â  Â  Â  Â  name: _l14.name || (_l14.gender === 'Female' ? 'Tax Dost' : _l14.gender === 'Male' ? 'Tax Dost' : ''),
Â  Â  Â  Â  Â  Â  Â  avatars: _q14,
Â  Â  Â  Â  Â  Â  Â  activeAvatarIndex: _r14,
Â  Â  Â  Â  Â  Â  Â  blockCount: _l14.blockCount || 0,
Â  Â  Â  Â  Â  Â  Â  isBlocked: _l14.isBlocked || false
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const [_t14, _u14] = useState(_o14());
Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  const _v14 = (_w14) => {
Â  Â  Â  Â  Â  Â  if (_w14.target.files) {
Â  Â  Â  Â  Â  Â  Â  const _x14 = Array.from(_w14.target.files);
Â  Â  Â  Â  Â  Â  Â  _x14.forEach(_y14 => {
Â  Â  Â  Â  Â  Â  Â  Â  const _z14 = new FileReader();
Â  Â  Â  Â  Â  Â  Â  Â  _z14.onload = (_a15) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (_a15.target && typeof _a15.target.result === 'string') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _u14(_b15 => ({ ..._b15, avatars: [..._b15.avatars, _a15.target.result] }));
Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  _z14.readAsDataURL(_y14);
Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const _c15 = (_d15) => {
Â  Â  Â  Â  Â  Â  _u14(_e15 => {
Â  Â  Â  Â  Â  Â  Â  const _f15 = _e15.expertise || [];
Â  Â  Â  Â  Â  Â  Â  if (_f15.includes(_d15)) {
Â  Â  Â  Â  Â  Â  Â  Â  return { ..._e15, expertise: _f15.filter(_g15 => _g15 !== _d15) };
Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  return { ..._e15, expertise: [..._f15, _d15] };
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â const _h15 = (_i15) => {
Â  Â  Â  Â  Â  Â  const _j15 = _i15 === 'Female' ? 'Tax Dost' : _i15 === 'Male' ? 'Tax Dost' : _t14.name;
Â  Â  Â  Â  Â  Â  _u14(_k15 => ({Â 
Â  Â  Â  Â  Â  Â  Â  Â  ..._k15,Â 
Â  Â  Â  Â  Â  Â  Â  Â  gender: _i15,
Â  Â  Â  Â  Â  Â  Â  Â  name: _k15.name || _j15,
Â  Â  Â  Â  Â  Â  Â  Â  activeAvatarIndex: 0
Â  Â  Â  Â  Â  Â  }));
Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  const _l15 = (_m15) => {
Â  Â  Â  Â  Â  Â  _m15.preventDefault();
Â  Â  Â  Â  Â  Â  if (_t14.name.trim() === '') {
Â  Â  Â  Â  Â  Â  Â  Â  alert("Please enter a name for the character.");
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (_t14.expertise.length === 0 && !_t14.customPersonality) {
Â  Â  Â  Â  Â  Â  Â  Â  alert("Please select at least one expertise area or add custom expertise & behaviour.");
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  _m14(_t14);
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <form onSubmit={_l15} className="p-4 space-y-4">
Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl font-bold text-center text-gray-700">AI Character Profile</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onClick={_n14} className="text-gray-500 hover:text-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-col items-center space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  src={_t14.avatars?.[_t14.activeAvatarIndex] || `https://i.pravatar.cc/150?u=${_t14.id}`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  alt="Character avatar"
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-24 h-24 rounded-full object-cover border-4 border-blue-200"
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="cursor-pointer text-sm text-blue-600 hover:underline">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Choose file
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" multiple accept="image/*" onChange={_v14} className="hidden" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-xs text-gray-500 mt-1">No file chosen</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700 mb-2">Additional Images (Max 5)</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="file"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  multiple
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  accept="image/*"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_v14}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="hidden"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id="additional-images"
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  <labelÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  htmlFor="additional-images"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="cursor-pointer text-sm text-blue-600 hover:underline"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Choose file
Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-xs text-gray-500 mt-1">No file chosen</p>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  {_t14.avatars?.length > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-2 flex flex-wrap gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_t14.avatars.map((_n15, _o15) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={_o15}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  src={_n15}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alt={`Avatar ${_o15 + 1}`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className={`w-12 h-12 rounded-lg object-cover cursor-pointer border-2 ${
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _t14.activeAvatarIndex === _o15 ? 'border-blue-600' : 'border-gray-200'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _u14(_p15 => ({ ..._p15, activeAvatarIndex: _o15 }))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Name *</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="text"
Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_t14.name}
Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_q15 => _u14({ ..._t14, name: _q15.target.value })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="An" required
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Age</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="number"
Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_t14.age}
Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_r15 => _u14({ ..._t14, age: parseInt(_r15.target.value) || 18 })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  min="13"
Â  Â  Â  Â  Â  Â  Â  Â  Â  max="100"
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="25" required
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Gender</label>
Â  Â  Â  Â  Â  Â  Â  Â  <select
Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_t14.gender}
Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_s15 => _h15(_s15.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  {Object.values(Gender).map(_t15 => <option key={_t15} value={_t15}>{_t15}</option>)}
Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Act Like</label>
Â  Â  Â  Â  Â  Â  Â  Â  <select
Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_t14.actLike}
Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_u15 => _u14({ ..._t14, actLike: _u15.target.value })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  {Object.values(ActLike).map(_v15 => <option key={_v15} value={_v15}>{_v15}</option>)}
Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700 mb-2">Expert</label>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-wrap gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  {Object.values(Expert).map(_w15 => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={_w15}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _c15(_w15)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className={`px-3 py-2 rounded-full text-sm font-medium transition-colors ${
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _t14.expertise?.includes(_w15)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ? 'bg-blue-600 text-white'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_w15.replace(/_/g, ' ')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-xs text-gray-500 mt-2">Select expertise areas for your CA. Multiple selections allowed.</p>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Custom Expertise & Behaviour (Optional)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â <textarea
Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_t14.customPersonality || ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_x15 => _u14({ ..._t14, customPersonality: _x15.target.value })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  rows={3}
Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="Describe specific expertise not listed above or preferred behavior style (e.g., 'Short answers in bullet points', 'Detailed explanations with examples', 'Focus on practical applications')"
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-end space-x-2 pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_n14}Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Cancel
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="submit"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Save Profile
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  };

Â  Â  Â  Â  const GroupSetup = ({ characters: _y15, onSave: _z15, onCancel: _a16 }) => {
Â  Â  Â  Â  Â  const [_b16, _c16] = useState({Â 
Â  Â  Â  Â  Â  Â  Â  id: `group_${Date.now()}`,Â 
Â  Â  Â  Â  Â  Â  Â  name: '',Â 
Â  Â  Â  Â  Â  Â  Â  members: [],Â 
Â  Â  Â  Â  Â  Â  Â  messages: [],
Â  Â  Â  Â  Â  Â  Â  blockCount: 0,
Â  Â  Â  Â  Â  Â  Â  isBlocked: false
Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  const _d16 = (_e16) => {
Â  Â  Â  Â  Â  Â  _c16(_f16 => {
Â  Â  Â  Â  Â  Â  Â  const _g16 = _f16.members.includes(_e16)Â 
Â  Â  Â  Â  Â  Â  Â  Â  ? _f16.members.filter(_h16 => _h16 !== _e16)
Â  Â  Â  Â  Â  Â  Â  Â  : [..._f16.members, _e16];
Â  Â  Â  Â  Â  Â  Â  return { ..._f16, members: _g16 };
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const _i16 = (_j16) => {
Â  Â  Â  Â  Â  Â  _j16.preventDefault();
Â  Â  Â  Â  Â  Â  if (_b16.name.trim() === '') {
Â  Â  Â  Â  Â  Â  Â  alert("Please enter a name for the group.");
Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (_b16.members.length === 0) {
Â  Â  Â  Â  Â  Â  Â  alert("Please select at least one AI profile for the group.");
Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  _z15(_b16);
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <form onSubmit={_i16} className="p-4 space-y-4">
Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl font-bold text-center text-gray-700">Create Group Chat</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onClick={_a16} className="text-gray-500 hover:text-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Group Name</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="text"
Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_b16.name}
Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_k16 => _c16({ ..._b16, name: _k16.target.value })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="E.g., Friends Group" required
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Select AI Profiles</label>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-1 space-y-2 max-h-40 overflow-y-auto border border-gray-300 rounded-md p-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  {_y15.map(_l16 => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label key={_l16.id} className="flex items-center space-x-2 cursor-pointer">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="checkbox"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checked={_b16.members.includes(_l16.id)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={() => _d16(_l16.id)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="rounded text-blue-600 focus:ring-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-sm text-gray-700">{_l16.name} ({_l16.relationship})</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-end space-x-2 pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_a16}Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Cancel
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="submit"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Create Group
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  };

Â  Â  Â  Â  const GroupEdit = ({ group: _m16, characters: _n16, onSave: _o16, onCancel: _p16 }) => {
Â  Â  Â  Â  Â  Â  const [_q16, _r16] = useState({Â 
Â  Â  Â  Â  Â  Â  Â  Â  ..._m16,
Â  Â  Â  Â  Â  Â  Â  Â  blockCount: _m16.blockCount || 0,
Â  Â  Â  Â  Â  Â  Â  Â  isBlocked: _m16.isBlocked || false
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  const _s16 = (_t16) => {
Â  Â  Â  Â  Â  Â  Â  Â  _r16(_u16 => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _v16 = _u16.members.includes(_t16)Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ? _u16.members.filter(_w16 => _w16 !== _t16)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  : [..._u16.members, _t16];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return { ..._u16, members: _v16 };
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  const _x16 = (_y16) => {
Â  Â  Â  Â  Â  Â  Â  Â  _y16.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  if (_q16.name.trim() === '') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("Please enter a name for the group.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  if (_q16.members.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("Please select at least one AI profile for the group.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  _o16(_q16);
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  <form onSubmit={_x16} className="p-4 space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl font-bold text-center text-gray-700">Edit Group Chat</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onClick={_p16} className="text-gray-500 hover:text-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Group Name</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="text"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_q16.name}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_z16 => _r16({ ..._q16, name: _z16.target.value })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="E.g., Friends Group" required
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Members</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-1 space-y-2 max-h-40 overflow-y-auto border border-gray-300 rounded-md p-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_n16.map(_a17 => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label key=_a17.id className="flex items-center space-x-2 cursor-pointer">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="checkbox"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checked={_q16.members.includes(_a17.id)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={() => _s16(_a17.id)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="rounded text-blue-600 focus:ring-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-sm text-gray-700">{_a17.name} ({_a17.relationship})</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-end space-x-2 pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_p16}Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Cancel
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="submit"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Save
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  };

Â  Â  Â  Â  const Sidebar = ({ isOpen: _b17, onClose: _c17, characters: _d17, groups: _e17, onSelectCharacter: _f17, onSelectGroup: _g17, showIndividual: _h17, setShowIndividual: _i17 }) => {
Â  Â  Â  Â  Â  Â  if (!_b17) return null;

Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed inset-0 bg-black bg-opacity-50 z-40" onClick={_c17}></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed left-0 top-0 h-full w-80 bg-white z-50 shadow-lg transform transition-transform">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="p-4 border-b">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-lg font-bold">Chat History</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={_c17} className="text-gray-500 hover:text-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex bg-gray-100 rounded-lg p-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _i17(true)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _h17 ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-600'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Individual
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _i17(false)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  !_h17 ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-600'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Group
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="p-4 overflow-y-auto h-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_h17 ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_d17.map(_j17 => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={_j17.id}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _f17(_j17.id);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _c17();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  src={_j17.avatars?.[_j17.activeAvatarIndex] || `https://i.pravatar.cc/150?u=${_j17.id}`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alt={_j17.name}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-10 h-10 rounded-full object-cover"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="ml-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="font-semibold text-gray-800">{_j17.name}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-gray-600">{_j17.relationship}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_e17.map(_k17 => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={_k17.id}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _g17(_k17.id);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _c17();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-10 h-10 rounded-full bg-blue-200 flex items-center justify-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-blue-800 font-semibold">{_k17.name[0]}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="ml-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="font-semibold text-gray-800">{_k17.name}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-gray-600">Group ({_k17.members.length} members)</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
                         </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  };

Â  Â  Â  Â  const ChatScreen = ({ character: _l17, userProfile: _m17, onCharacterUpdate: _n17, onBack: _o17, onUserProfileUpdate: _p17, backgroundUrl: _q17, onSetBackground: _r17 }) => {

Â  Â  Â  Â  Â  Â  const TOTAL_API_KEYS = 3;
Â  Â  Â  Â  Â  const [_s17, _t17] = useState(_l17.messages);
Â  Â  Â  Â  Â  const [_u17, _v17] = useState(false);
Â  Â  Â  Â  Â  const [_w17, _x17] = useState(false);
Â  Â  Â  Â  Â  const [_y17, _z17] = useState(false);
Â  Â  Â  Â  Â  const [_a18, _b18] = useState(_l17.blockCount || 0);
Â  Â  Â  Â  Â  const [_c18, _d18] = useState(_l17.isBlocked || false);
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const _e18 = useRef(_s17);
Â  Â  Â  Â  Â  _e18.current = _s17;

Â  Â  Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  Â  Â  _n17({ ..._l17, messages: _s17, blockCount: _a18, isBlocked: _c18 });
Â  Â  Â  Â  Â  }, [_s17, _a18, _c18]);

Â  Â  Â  Â const _f18 = useCallback(async (_g18, _h18 = []) => {
Â  Â  if (_c18) return;

Â  Â  const _i18 = {
Â  Â  Â  Â  id: `msg_${Date.now()}`,
Â  Â  Â  Â  sender: MessageSender.USER,
Â  Â  Â  Â  text: _g18,
Â  Â  Â  Â  attachments: _h18,
Â  Â  Â  Â  timestamp: Date.now(),
Â  Â  };
Â  Â  let _j18 = _g18;

Â  Â  if (_h18 && _h18.length > 0) {
Â  Â  Â  const _k18 = _h18.map(_l18 => {
Â  Â  Â  Â 
if (_l18.type.startsWith('text/') || _l18.type.includes('json') || _l18.type.includes('csv') || _l18.type.includes('pdf') || _l18.type.includes('wordprocessingml.document') || _l18.type.startsWith('image/')) {
Â  Â  return `\n\n--- Attached File: ${_l18.name} ---\n${_l18.content}\n--- End of File ---`;
Â  Â  Â  Â  }
Â  Â  Â  Â  return '';
Â  Â  Â  }).join('');
Â  Â  Â Â 
Â  Â  Â  _j18 += _k18;
Â  Â  }

Â  Â  const _m18 = { ..._i18, text: _j18 };



Â  Â  Â  const _n18 = [..._e18.current, _i18];
Â  Â  _t17(_n18);
Â  Â  _v17(true);

Â  Â  const _o18 = `msg_${Date.now() + 1}`;
Â  Â  _t17(_p18 => [..._p18, { id: _o18, sender: MessageSender.AI, text: '', timestamp: Date.now() }]);

Â  Â  const _q18 = (_r18) => {
Â  Â  Â  Â  Â  Â  _t17(_s18 =>
Â  Â  Â  Â  Â  Â  Â  Â  _s18.map(_t18 =>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _t18.id === _o18 ? { ..._t18, text: _t18.text + (_t18.text.endsWith('\n\nSomething went wrong. Please retry.') ? '' : _r18) } : _t18
Â  Â  Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  };

Â  Â  Â  Â  let _u18 = false;
Â  Â  Â  Â  let _v18 = 0;

Â  Â  Â  Â  while (!_u18 && _v18 < TOTAL_API_KEYS) {
Â  Â  Â  Â  Â  Â  const _w18 = await apiKeyManager.getDeactivatedKeys();
Â  Â  Â  Â  Â  Â  if (_w18.some(_x18 => _x18.index === _v18)) {
Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Key index ${_v18} is on cooldown. Skipping.`);
Â  Â  Â  Â  Â  Â  Â  Â  _v18++;
Â  Â  Â  Â  Â  Â  Â  Â  continue;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const _y18 = await generateChatResponseStream(_l17, _m17, _n18, _m18, _q18, () => {}, _v18);

Â  Â  Â  Â  Â  Â  Â  Â  if (_y18.status === 429) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _z18 = await _y18.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw { name: 'QuotaError', failedIndex: _z18.failedKeyIndex };
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (!_y18.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(`Server error: ${_y18.statusText}`);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  _u18 = true;
Â  Â  Â  Â  Â  Â  Â  Â  currentKeyIndex = _v18;
Â  Â  Â  Â  Â  Â  Â  Â  const _a19 = _y18.body.getReader();
Â  Â  Â  Â  Â  Â  Â  Â  const _b19 = new TextDecoder();
Â  Â  Â  Â  Â  Â  Â  Â  let _c19 = '';

Â  Â  Â  Â  Â  Â  Â  Â  while (true) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const { done: _d19, value: _e19 } = await _a19.read();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (_d19) break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _f19 = _b19.decode(_e19, { stream: true });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _c19 += _f19;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _q18(_f19);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (_c19.trim() === '[BLOCK_USER]') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _b18(_g19 => _g19 + 1);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _d18(true);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _t17(_h19 => _h19.filter(_i19 => _i19.id !== _o18));
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } catch (_j19) {
Â  Â  Â  Â  Â  Â  Â  Â  if (_j19.name === 'QuotaError') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.warn(`Key at index ${_j19.failedIndex} failed. Deactivating and trying next.`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await apiKeyManager.deactivateKey(_j19.failedIndex);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _v18++;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("A non-quota error occurred:", _j19);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _q18("\n\nSomething went wrong. Please retry.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;Â 
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  if (!_u18) {
Â  Â  Â  Â  Â  Â  console.error("All API keys failed or were on cooldown.");
Â  Â  Â  Â  Â  Â  _t17(_k19 => _k19.map(_l19 =>Â 
Â  Â  Â  Â  Â  Â  Â  Â  _l19.id === _o18 && _l19.text === ''Â 
Â  Â  Â  Â  Â  Â  Â  Â  ? {..._l19, text: "All services are currently busy. Please try again later."}Â 
Â  Â  Â  Â  Â  Â  Â  Â  : _l19
Â  Â  Â  Â  Â  Â  ));
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  _v17(false);
Â  Â  }, [_l17, _m17, _c18]);

Â  Â  const [_m19, _n19] = useState([]);

Â  Â  const _o19 = (_p19, _q19) => {
Â  Â  Â  Â  const _r19 = _s17.map(_t19 =>
Â  Â  Â  Â  Â  Â  _t19.id === _p19 ? { ..._t19, text: _q19 } : _t19
Â  Â  Â  Â  );
Â  Â  Â  Â  _t17(_r19);
Â  Â  };

Â  Â  const _u19 = (_v19) => {
Â  Â  Â  Â  const _w19 = _s17.filter(_x19 => _x19.id !== _v19);
Â  Â  Â  Â  _t17(_w19);
Â  Â  Â  Â  _n19(_y19 => _y19.filter(_z19 => _z19 !== _v19));
Â  Â  };

Â  Â  const _a20 = (_b20) => {
Â  Â  Â  Â  _n19(_c20 =>Â 
Â  Â  Â  Â  Â  Â  _c20.includes(_b20)Â 
Â  Â  Â  Â  Â  Â  Â  Â  ? _c20.filter(_d20 => _d20 !== _b20)
Â  Â  Â  Â  Â  Â  Â  Â  : [..._c20, _b20]
Â  Â  Â  Â  );
Â  Â  };

Â  Â  const _e20 = (_f20) => {
Â  Â  Â  Â  _n19(_g20 =>Â 
Â  Â  Â  Â  Â  Â  _g20.includes(_f20) ? _g20 : [..._g20, _f20]
Â  Â  Â  Â  );
Â  Â  };

Â  Â  const _h20 = () => {
Â  Â  Â  Â  if (_m19.length > 0 && confirm(`Delete ${_m19.length} selected message(s)?`)) {
Â  Â  Â  Â  Â  Â  const _i20 = _s17.filter(_j20 => !_m19.includes(_j20.id));
Â  Â  Â  Â  Â  Â  _t17(_i20);
Â  Â  Â  Â  Â  Â  _n19([]);
Â  Â  Â  Â  }
Â  Â  };

Â  Â  Â  Â  Â  const _k20 = () => {
Â  Â  Â  Â  Â  Â  if (_a18 >= 3) {
Â  Â  Â  Â  Â  Â  Â  Â  alert("You have been blocked permanently. This chat will be deleted.");
Â  Â  Â  Â  Â  Â  Â  Â  setCharacters(_l20 => _l20.filter(_m20 => _m20.id !== _l17.id));
Â  Â  Â  Â  Â  Â  Â  Â  setGroups(_n20 => _n20.map(_o20 => ({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ..._o20,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  members: _o20.members.filter(_p20 => _p20 !== _l17.id)
Â  Â  Â  Â  Â  Â  Â  Â  })).filter(_q20 => _q20.members.length > 0));
Â  Â  Â  Â  Â  Â  Â  Â  _o17();
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  _d18(false);
Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const _r20 = () => {
Â  Â  Â  Â  Â  Â  Â  if (window.confirm("Are you sure you want to delete all messages in this chat?")) {
Â  Â  Â  Â  Â  Â  Â  Â  _t17([]);
Â  Â  Â  Â  Â  Â  Â  Â  _b18(0);
Â  Â  Â  Â  Â  Â  Â  Â  _d18(false);
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const _s20 = (_t20) => {
Â  Â  Â  Â  Â  Â  _n17({..._t20, messages: _s17, blockCount: _a18, isBlocked: _c18});
Â  Â  Â  Â  Â  Â  _x17(false);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const _u20 = (_v20) => {
Â  Â  Â  Â  Â  Â  _p17(_v20);
Â  Â  Â  Â  Â  Â  _z17(false);
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â <div className="app-container w-full bg-gray-100">
Â  Â  Â  Â  Â  Â  Â  <ChatHeaderÂ 
Â  Â  Â  Â  Â  Â  Â  Â  character={_l17}Â 
Â  Â  Â  Â  Â  Â  Â  Â  onBack={_o17}Â 
Â  Â  Â  Â  Â  Â  Â  Â  onEditAiProfile={() => _x17(true)}
Â  Â  Â  Â  Â  Â  Â  Â  onEditUserProfile={() => _z17(true)}
Â  Â  Â  Â  Â  Â  Â  Â  onClearChat={_r20}
Â  Â  Â  Â  Â  Â  Â  Â  onSetBackground={_r17}
Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  {_m19.length > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed top-20 left-4 right-4 bg-white border border-gray-300 rounded-lg shadow-lg p-3 z-20 flex justify-between items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-sm font-medium">{_m19.length} message(s) selected</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _n19([])}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Cancel
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_h20}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Delete
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  <MessageListÂ 
Â  Â  Â  Â  Â  Â  Â  Â  messages={_s17}Â 
Â  Â  Â  Â  Â  Â  Â  Â  character={_l17}Â 
Â  Â  Â  Â  Â  Â  Â  Â  userProfile={_m17}Â 
Â  Â  Â  Â  Â  Â  Â  Â  isTyping={_u17}Â 
Â  Â  Â  Â  Â  Â  Â  Â  backgroundUrl={_q17}
Â  Â  Â  Â  Â  Â  Â  Â  onEditMessage={_o19}
Â  Â  Â  Â  Â  Â  Â  Â  onDeleteMessage={_u19}
Â  Â  Â  Â  Â  Â  Â  Â  selectedMessages={_m19}
Â  Â  Â  Â  Â  Â  Â  Â  onSelectMessage={_a20}
Â  Â  Â  Â  Â  Â  Â  Â  onLongPressMessage={_e20}
Â  Â  Â  Â  Â  Â  Â  Â  isBlocked={_c18}
Â  Â  Â  Â  Â  Â  Â  Â  blockCount={_a18}
Â  Â  Â  Â  Â  Â  Â  Â  characterName={_l17.name}
Â  Â  Â  Â  Â  Â  Â  Â  handleUnblock={_k20}
Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  <MessageInput onSend={_f18} isBlocked={_c18} />

Â  Â  Â  Â  Â  Â  Â  {_w17 && (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CharacterSetup
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  initialCharacter={{ ..._l17, blockCount: _a18, isBlocked: _c18 }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSave={_s20}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onCancel={() => _x17(false)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  {_y17 && (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <UserProfileSetup
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userProfile={_m17}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSave={_u20}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onCancel={() => _z17(false)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  };

Â  const GroupChatScreen = ({ group: _w20, characters: _x20, userProfile: _y20, onGroupUpdate: _z20, onBack: _a21, onUserProfileUpdate: _b21, backgroundUrl: _c21, onSetBackground: _d21 }) => {
Â  Â  const TOTAL_API_KEYS = 3;

Â  Â  const [_e21, _f21] = useState(_w20.messages || []);
Â  Â  const [_g21, _h21] = useState(false);
Â  Â  const [_i21, _j21] = useState(false);
Â  Â  const [_k21, _l21] = useState(false);
Â  Â  const [_m21, _n21] = useState(0);
Â  Â  const [_o21, _p21] = useState(_w20.blockCount || 0);
Â  Â  const [_q21, _r21] = useState(_w20.isBlocked || false);
Â  Â  const _s21 = useRef(_e21);
Â  Â  useEffect(() => { _s21.current = _e21; }, [_e21]);

Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  _z20({ ..._w20, messages: _e21, blockCount: _o21, isBlocked: _q21 });
Â  Â  }, [_e21, _o21, _q21]);

Â  Â  const _t21 = useMemo(() =>Â 
Â  Â  Â  Â  _w20.members.map(_u21 => _x20.find(_v21 => _v21.id === _u21)).filter(Boolean),Â 
Â  Â  Â  Â  [_w20.members, _x20]
Â  Â  );

Â  Â Â 

Â  Â  const _w21 = useCallback(async (_x21, _y21 = '', _z21 = []) => {
Â  Â  Â  Â  if (_q21) return;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const _a22 =Â  false;
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â let _b22 = _y21;

Â  Â  if (!_x21 && _z21 && _z21.length > 0) {
Â  Â  Â  Â  const _c22 = _z21.map(_d22 => {
Â  Â  Â  Â Â 
if (_d22.type.startsWith('text/') || _d22.type.includes('json') || _d22.type.includes('csv') || _d22.type.includes('pdf') || _d22.type.includes('wordprocessingml.document') || _d22.type.startsWith('image/')) {
Â  Â  Â  Â  Â  Â  Â  Â  return `\n\n--- Attached File: ${_d22.name} ---\n${_d22.content}\n--- End of File ---`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return '';
Â  Â  Â  Â  }).join('');
Â  Â  Â  Â Â 
Â  Â  Â  Â  _b22 += _c22;
Â  Â  }
Â  Â Â 
Â  Â  Â  Â  let _e22;
Â  Â  if (_x21) {
Â  Â  Â  Â  let _f22 = _a22 ?
Â  Â  Â  Â  Â  Â  '[System: User is listening, continue naturally.]' :
Â  Â  Â  Â  Â  Â  `[System: User skipped. ${_m21 + 1 >= 2 ? 'User seems unavailable, continue among AIs.' : 'Continue conversation.'}]`;
Â  Â  Â  Â  _e22 = {
Â  Â  Â  Â  Â  Â  text: _f22
Â  Â  Â  Â  };
Â  Â  } else {
Â  Â  Â  Â  _e22 = {
Â  Â  Â  Â  Â  Â  id: `msg_${Date.now()}`,
Â  Â  Â  Â  Â  Â  sender: MessageSender.USER,
Â  Â  Â  Â  Â  Â  text: _y21,
Â  Â  Â  Â  Â  Â  attachments: _z21,
Â  Â  Â  Â  Â  Â  timestamp: Date.now()
Â  Â  Â  Â  };
Â  Â  }
Â  Â  Â  Â  Â // AI ke liye ek alag message object banayein jisme file content bhi hai.
Â  Â  const _g22 = { ..._e22, text: _b22 };

Â  Â  Â  Â  let _h22 = [..._s21.current];
Â  Â  Â  Â  if (!_x21) {
Â  Â  Â  Â  Â  Â  _h22.push(_e22);
Â  Â  Â  Â  Â  Â  _f21(_h22);
Â  Â  Â  Â  }

Â  Â  Â  Â  _h21(true);
Â  Â  Â  Â  const _i22 = _x21 ? _m21 + 1 : 0;
Â  Â  Â  Â  _n21(_i22);

Â  Â  Â  Â  const _j22 = `stream_${Date.now()}`;
Â  Â  Â  Â  _f21(_k22 => [..._k22, {
Â  Â  Â  Â  id: _j22,
Â  Â  Â  Â  sender: 'group',
Â  Â  Â  Â  text: '',
Â  Â  Â  Â  timestamp: Date.now()
Â  Â  }]);

Â  Â  const _l22 = (_m22) => {
Â  Â  Â  Â  _f21(_n22 => _n22.map(_o22 => _o22.id === _j22 ? { ..._o22,
Â  Â  Â  Â  Â  Â  text: _o22.text + _m22
Â  Â  Â  Â  } : _o22));
Â  Â  };
Â  Â  Â  Â Â 
Â  Â  Â  Â  let _p22 = false;
Â  Â  Â  Â  let _q22 = 0;

Â  Â  Â  Â  while (!_p22 && _q22 < TOTAL_API_KEYS) {
Â  Â  Â  Â  Â  Â  const _r22 = await apiKeyManager.getDeactivatedKeys();
Â  Â  Â  Â  Â  Â  if (_r22.some(_s22 => _s22.index === _q22)) {
Â  Â  Â  Â  Â  Â  Â  Â  console.log(`Key index ${_q22} is on cooldown for group chat. Skipping.`);
Â  Â  Â  Â  Â  Â  Â  Â  _q22++;
Â  Â  Â  Â  Â  Â  Â  Â  continue;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  try {Â 
Â  Â  Â  Â  Â  Â  Â  Â  const _t22 = await generateGroupChatResponseStream(_t21, _y20, _h22, _g22, _l22, _i22, () => {}, _q22);


Â  Â  Â  Â  Â  Â  Â  Â  if (_t22.status === 429) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _u22 = await _t22.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw { name: 'QuotaError', failedIndex: _u22.failedKeyIndex };
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  if (!_t22.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(`Server error: ${_t22.statusText}`);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  _p22 = true;
Â  Â  Â  Â  Â  Â  Â  Â  currentKeyIndex = _q22;
Â  Â  Â  Â  Â  Â  Â  Â  const _v22 = _t22.body.getReader();
Â  Â  Â  Â  Â  Â  Â  Â  const _w22 = new TextDecoder();
Â  Â  Â  Â  Â  Â  Â  Â  let _x22 = '';

Â  Â  Â  Â  Â  Â  Â  Â  while (true) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const { done: _y22, value: _z22 } = await _v22.read();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (_y22) break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _a23 = _w22.decode(_z22, { stream: true });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _x22 += _a23;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â 

Â  Â  Â  Â  Â  Â  Â  Â  if (_x22.includes('[BLOCK_USER]')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _p21(_b23 => _b23 + 1);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _r21(true);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _f21(_c23 => _c23.filter(_d23 => _d23.id !== _j22));
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _e23 = [];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _f23 = _x22.split('\n');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _g23 = /^([\w\s]+):\s*(.*)/;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _f23.forEach(_h23 => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _i23 = _h23.match(_g23);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (_i23) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _j23 = _i23[1].trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _k23 = _i23[2].trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const _l23 = _t21.find(_m23 => _m23.name === _j23);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (_l23) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _e23.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id: `msg_${Date.now()}_${Math.random()}`,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sender: _l23.id,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text: _k23,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timestamp: Date.now()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (_e23.length > 0 && _h23.trim().length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _e23[_e23.length - 1].text += '\n' + _h23;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _f21(_n23 => [..._n23.filter(_o23 => _o23.id !== _j22), ..._e23.filter(_p23 => _p23.text)]);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } catch (_q23) {
Â  Â  Â  Â  Â  Â  Â  Â  if (_q23.name === 'QuotaError') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.warn(`Key at index ${_q23.failedIndex} failed for group chat. Deactivating.`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await apiKeyManager.deactivateKey(_q23.failedIndex);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _q22++;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("Group chat API error:", _q23);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _f21(_r23 => _r23.map(_s23 => _s23.id === _j22 ? {..._s23, text: "Something went wrong."} : _s23));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (!_p22) {
Â  Â  Â  Â  Â  Â  console.error("All API keys for group chat failed.");
Â  Â  Â  Â  Â  Â  _f21(_t23 => _t23.map(_u23 => _u23.id === _j22 ? {..._u23, text: "All services are currently busy. Please try again later."} : _u23));
Â  Â  Â  Â  }

Â  Â  Â  Â  _h21(false);
Â  Â  }, [_t21, _y20, _m21, _q21]);
Â  Â Â 
Â  Â  const _v23 = (_w23, _x23 = []) => _w21(false, _w23, _x23);
Â  Â  const _y23 = () => _w21(true);

Â  Â  const _z23 = () => {
Â  Â  Â  Â  if (_o21 >= 3) {
Â  Â  Â  Â  Â  Â  alert("You have been blocked permanently. This group chat will be deleted.");
Â  Â  Â  Â  Â  Â  _a21();
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â  _r21(false);
Â  Â  };

Â  Â  const _a24 = () => {
Â  Â  Â  Â  if (window.confirm("Are you sure you want to delete all messages in this group chat?")) {
Â  Â  Â  Â  Â  Â  _f21([]);
Â  Â  Â  Â  Â  Â  _p21(0);
Â  Â  Â  Â  Â  Â  _r21(false);
Â  Â  Â  Â  }
Â  Â  };

Â  Â  const _b24 = (_c24) => {
Â  Â  Â  Â  _b21(_c24);
Â  Â  Â  Â  _j21(false);
Â  Â  };

Â  Â  const _d24 = (_e24) => {
Â  Â  Â  Â  _z20({ ..._e24, messages: _e21, blockCount: _o21, isBlocked: _q21 });
Â  Â  Â  Â  _l21(false);
Â  Â  };

Â  Â  const [_f24, _g24] = useState([]);

Â  Â  const _h24 = (_i24, _j24) => {
Â  Â  Â  Â  const _k24 = _e21.map(_l24 =>
Â  Â  Â  Â  Â  Â  _l24.id === _i24 ? { ..._l24, text: _j24 } : _l24
Â  Â  Â  Â  );
Â  Â  Â  Â  _f21(_k24);
Â  Â  };

Â  Â  const _m24 = (_n24) => {
Â  Â  Â  Â  const _o24 = _e21.filter(_p24 => _p24.id !== _n24);
Â  Â  Â  Â  _f21(_o24);
Â  Â  Â  Â  _g24(_q24 => _q24.filter(_r24 => _r24 !== _n24));
Â  Â  };

Â  Â  const _s24 = (_t24) => {
Â  Â  Â  Â  _g24(_u24 =>Â 
Â  Â  Â  Â  Â  Â  _u24.includes(_t24)Â 
Â  Â  Â  Â  Â  Â  Â  Â  ? _u24.filter(_v24 => _v24 !== _t24)
Â  Â  Â  Â  Â  Â  Â  Â  : [..._u24, _t24]
Â  Â  Â  Â  );
Â  Â  };

Â  Â  const _w24 = (_x24) => {
Â  Â  Â  Â  _g24(_y24 =>Â 
Â  Â  Â  Â  Â  Â  _y24.includes(_x24) ? _y24 : [..._y24, _x24]
Â  Â  Â  Â  );
Â  Â  };

Â  Â  const _z24 = () => {
Â  Â  Â  Â  if (_f24.length > 0 && confirm(`Delete ${_f24.length} selected message(s)?`)) {
Â  Â  Â  Â  Â  Â  const _a25 = _e21.filter(_b25 => !_f24.includes(_b25.id));
Â  Â  Â  Â  Â  Â  _f21(_a25);
Â  Â  Â  Â  Â  Â  _g24([]);
Â  Â  Â  Â  }
Â  Â  };

Â  Â  return (
Â  Â  Â  Â  <div className="app-container w-full bg-gray-100">
Â  Â  Â  Â  Â  Â  <header className="fixed-header bg-blue-600 text-white p-3 flex items-center shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={_a21} className="p-2 rounded-full hover:bg-white/20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="ml-3 flex-grow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="font-semibold text-lg">{_w20.name}</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm opacity-90">Group Chat â€¢ {_t21.length} members</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => _l21(true)} className="p-2 text-white hover:bg-white/20 rounded">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={_a24} className="p-2 text-white hover:bg-white/20 rounded">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => _j21(true)} className="p-2 text-white hover:bg-white/20 rounded">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </header>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  {_f24.length > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed top-20 left-4 right-4 bg-white border border-gray-300 rounded-lg shadow-lg p-3 z-20 flex justify-between items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-sm font-medium">{_f24.length} message(s) selected</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _g24([])}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Cancel
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_z24}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Delete
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  <MessageListÂ 
Â  Â  Â  Â  Â  Â  Â  Â  messages={_e21}Â 
Â  Â  Â  Â  Â  Â  Â  Â  characters={_x20}
Â  Â  Â  Â  Â  Â  Â  Â  userProfile={_y20}Â 
Â  Â  Â  Â  Â  Â  Â  Â  isTyping={_g21}Â 
Â  Â  Â  Â  Â  Â  Â  Â  backgroundUrl={_c21}
Â  Â  Â  Â  Â  Â  Â  Â  onEditMessage={_h24}
Â  Â  Â  Â  Â  Â  Â  Â  onDeleteMessage={_m24}
Â  Â  Â  Â  Â  Â  Â  Â  selectedMessages={_f24}
Â  Â  Â  Â  Â  Â  Â  Â  onSelectMessage={_s24}
Â  Â  Â  Â  Â  Â  Â  Â  onLongPressMessage={_w24}
Â  Â  Â  Â  Â  Â  Â  Â  isBlocked={_q21}
Â  Â  Â  Â  Â  Â  Â  Â  blockCount={_o21}
Â  Â  Â  Â  Â  Â  Â  Â  groupName={_w20.name}
Â  Â  Â  Â  Â  Â  Â  Â  handleUnblock={_z23}
Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  <MessageInput onSend={_v23} onSkip={_y23} isBlocked={_q21} />
Â  Â  Â  Â  Â  Â  {_i21 && (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <UserProfileSetup
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userProfile={_y20}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSave={_b24}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onCancel={() => _j21(false)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  {_k21 && (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <GroupEdit
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  group={_w20}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  characters={_x20}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSave={_d24}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onCancel={() => _l21(false)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  </div>
Â  Â  );
};


Â  Â  Â  Â Â 
Â  Â  Â  Â  const InstructionsModal = ({ isOpen: _c25, onClose: _d25 }) => {
Â  Â  Â  Â  Â  Â  if (!_c25) return null;

Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white rounded-lg w-full max-w-4xl h-[90vh] flex flex-col shadow-2xl overflow-hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <header className="flex items-center justify-between p-4 border-b">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl font-bold text-gray-800">App Guide & Instructions</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_d25}Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-2 text-gray-500 hover:text-gray-800 rounded-full hover:bg-gray-100"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </header>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex-grow overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <iframeÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  src="./instructions.html"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full h-full border-0"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title="Instructions"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ></iframe>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  };
Â  Â  Â  Â  const CharacterList = ({ characters: _e25, groups: _f25, onSelectCharacter: _g25, onSelectGroup: _h25, setCharacters: _i25, setGroups: _j25, setUserProfile: _k25, setChatBackground: _l25, userProfile: _m25, chatBackground: _n25, isGoogleAuthed: _o25, onLogout: _p25, onNavigateToUpdates: _q25 }) => {
Â  Â  Â  Â  Â  const [_r25, _s25] = useState(false);
Â  Â  Â  Â  Â  const [_t25, _u25] = useState(false);
Â  Â  Â  Â  Â  const [_v25, _w25] = useState(false);
Â  Â  Â  Â  Â  const [_x25, _y25] = useState(false);
Â  Â  Â  Â  Â  const [_z25, _a26] = useState(true);
Â  Â  Â  Â  const [_b26, _c26] = useState(false);Â 
Â  Â  Â  Â  Â  const _d26 = useRef(null);

Â  Â  Â  Â  Â  const _e26 = (_f26) => {
Â  Â  Â  Â  Â  Â  _i25(_g26 => [..._g26, _f26]);
Â  Â  Â  Â  Â  Â  _s25(false);
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const _h26 = (_i26) => {
Â  Â  Â  Â  Â  Â  _j25(_j26 => [..._j26, _i26]);
Â  Â  Â  Â  Â  Â  _u25(false);
Â  Â  Â  Â  Â  Â  _h25(_i26.id);
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â const _k26 = (_l26, _m26) => {
Â  Â  _l26.stopPropagation();
Â  Â  if (window.confirm("Are you sure you want to delete this AI profile? This will also remove it from all group chats.")) {
Â  Â  Â  Â  _i25(_n26 => _n26.filter(_o26 => _o26.id !== _m26));
Â  Â  Â  Â  _j25(_p26 => _p26.map(_q26 => ({
Â  Â  Â  Â  Â  Â  ..._q26,
Â  Â  Â  Â  Â  Â  members: _q26.members.filter(_r26 => _r26 !== _m26)
Â  Â  Â  Â  })).filter(_s26 => _s26.members.length > 0));
Â  Â  }
};

const _t26 = (_u26) => {
Â  Â  _k25(_u26);
Â  Â  _w25(false);
};

const _v26 = (_w26) => {
Â  Â  const _x26 = _w26.target.files[0];
Â  Â  if (_x26) {
Â  Â  Â  Â  const _y26 = new FileReader();
Â  Â  Â  Â  _y26.onload = (_z26) => {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const _a27 = JSON.parse(_z26.target.result);

Â  Â  Â  Â  Â  Â  Â  Â  if (_a27.userProfile) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _k25(_a27.userProfile);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (_a27.characters) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _i25(_b27 => [..._b27, ..._a27.characters]);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  if (_a27.groups) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _j25(_c27 => [..._c27, ..._a27.groups]);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  alert("Data imported successfully!");
Â  Â  Â  Â  Â  Â  } catch (_d27) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Import error:", _d27);
Â  Â  Â  Â  Â  Â  Â  Â  alert("Failed to import data. Please check the file format.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };
Â  Â  Â  Â  _y26.readAsText(_x26);
Â  Â  }
};


const _e27 = () => {
Â  Â  const _f27 = { userProfile: _m25, characters: _e25, groups: _f25 };
Â  Â  const _g27 = new Blob([JSON.stringify(_f27, null, 2)], { type: 'application/json' });
Â  Â  const _h27 = URL.createObjectURL(_g27);
Â  Â  const _i27 = document.createElement('a');
Â  Â  _i27.href = _h27;
Â  Â  _i27.download = 'TaxFriend_data.json';
Â  Â  _i27.click();
Â  Â  URL.revokeObjectURL(_h27);
};

return (
Â  Â  <>
Â  Â  Â  Â  <div className="flex flex-col h-full bg-blue-600">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <header className="bg-blue-600 text-white p-4 pt-8 flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => _y25(true)} className="p-2 hover:bg-white/20 rounded">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" /></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={_p25} className="p-2 hover:bg-white/20 rounded-full" title="Logout">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <h1 className="text-xl font-bold">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Virtual Chartered Accountants
Â  Â  Â  Â  Â  Â  Â  Â  </h1>

Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={handleAuthClick}Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className={`py-1 px-3 rounded-full text-xs font-semibold transition-colors ${ _o25 ? 'bg-green-500 hover:bg-green-600 text-white' : 'bg-white hover:bg-gray-200 text-blue-600' }`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_o25 ? 'Drive Connected' : 'Connect to Drive'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _c26(true)}Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-2 rounded-full hover:bg-white/20"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title="Instructions"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => _w25(true)} className="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src={_m25.avatar || `https://i.pravatar.cc/150?u=${_m25.id}`} alt="Profile" className="w-8 h-8 rounded-full object-cover" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </header>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <main className="flex-grow bg-white rounded-t-3xl p-4 overflow-y-auto">
Â  Â  <div className="flex justify-between items-center mb-6">
Â  Â  Â  Â  <h3 className="text-lg font-bold text-gray-700">Chats</h3>
Â  Â  Â  Â  <div className="flex gap-2">
Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _s25(true)}
Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-3 bg-blue-600 text-white rounded-full text-sm hover:bg-blue-700"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  New AI
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _u25(true)}
Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-3 bg-blue-600 text-white rounded-full text-sm hover:bg-blue-700"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  New Group
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_q25}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-3 bg-teal-600 text-white rounded-full text-sm hover:bg-teal-700"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Latest Updates
Â  Â  Â  Â  Â  Â  Â </button>
Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _d26.current?.click()}
Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-3 bg-gray-600 text-white rounded-full text-sm hover:bg-gray-700"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Import
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  type="file"
Â  Â  Â  Â  Â  Â  Â  Â  ref={_d26}
Â  Â  Â  Â  Â  Â  Â  Â  accept=".json"
Â  Â  Â  Â  Â  Â  Â  Â  onChange={_v26}
Â  Â  Â  Â  Â  Â  Â  Â  className="hidden"
Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  onClick={_e27}
Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-3 bg-gray-600 text-white rounded-full text-sm hover:bg-gray-700"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Export
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  {_e25.length === 0 && _f25.length === 0 ? (
Â  Â  Â  Â  <div className="flex flex-col items-center justify-center h-full">
Â  Â  Â  Â  Â  Â  <div className="bg-blue-100 rounded-full p-4 mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <h2 className="text-xl text-gray-700">Hey! I'm Tax Dost</h2>
Â  Â  Â  Â  Â  Â  <p className="text-sm text-gray-500 text-center">Your personal Chartered Accountant. Ask me anything about tax, finance, or investments to get started! ðŸ’¼</p>
Â  Â  Â  Â  Â  Â  <button onClick={() => _s25(true)} className="mt-4 py-2 px-4 bg-blue-600 text-white rounded-full">+ New Chat</button>
Â  Â  Â  Â  </div>
Â  Â  ) : (
Â  Â  Â  Â  <div className="space-y-3">
Â  Â  Â  Â  Â  Â  {_e25.map(_j27 => (
Â  Â  Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={_j27.id}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _g25(_j27.id)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  src={_j27.avatars?.[_j27.activeAvatarIndex] || `https://i.pravatar.cc/150?u=${_j27.id}`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alt={_j27.name}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-12 h-12 rounded-full object-cover"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="ml-4 flex-grow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="font-semibold text-gray-800">{_j27.name}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-xs text-gray-500">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_j27.messages?.length > 0 ? new Date(_j27.messages[_j27.messages.length - 1].timestamp).toLocaleTimeString('en-US', {hour: '2-digit', minute: '2-digit'}) : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-gray-600">{_j27.actLike} â€¢ {_j27.expertise[0] || 'General CA'}</p>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_k26.bind(null, _l27, _j27.id)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-1 text-red-400 hover:text-red-600"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  {_f25.map(_m27 => (
Â  Â  Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={_m27.id}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _h25(_m27.id)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-12 h-12 rounded-full bg-blue-200 flex items-center justify-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-blue-800 font-semibold">{_m27.name[0]}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="ml-4 flex-grow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="font-semibold text-gray-800">{_m27.name}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-xs text-gray-500">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_m27.messages?.length > 0 ? new Date(_m27.messages[_m27.messages.length - 1].timestamp).toLocaleTimeString('en-US', {hour: '2-digit', minute: '2-digit'}) : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-gray-600">Group ({_m27.members.length} members)</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_n27 => { _n27.stopPropagation(); if (window.confirm("Are you sure you want to delete this group?")) { _j25(_o27 => _o27.filter(_p27 => _p27.id !== _m27.id)); } }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-1 text-red-400 hover:text-red-600"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  </div>
Â  Â  )}
</main>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <Sidebar
Â  Â  Â  Â  Â  Â  isOpen={_x25}
Â  Â  Â  Â  Â  Â  onClose={() => _y25(false)}
Â  Â  Â  Â  Â  Â  characters={_e25}
Â  Â  Â  Â  Â  Â  groups={_f25}
Â  Â  Â  Â  Â  Â  onSelectCharacter={_g25}
Â  Â  Â  Â  Â  Â  onSelectGroup={_h25}
Â  Â  Â  Â  Â  Â  showIndividual={_z25}
Â  Â  Â  Â  Â  Â  setShowIndividual={_a26}
Â  Â  Â  Â  />

Â  Â  Â  Â  {_r25 && (
Â  Â  Â  Â  Â  Â <div className="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CharacterSetup
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  initialCharacter={{
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id: `char_${Date.now()}`,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: '',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  actLike: ActLike.FRIEND,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gender: Gender.FEMALE,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  age: 25,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  expertise: [Expert.TAX_CONSULTANT],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  avatars: [],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  defaultAvatar: '01_CAGIRL.png',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  activeAvatarIndex: 0,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messages: [],Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â customPersonality: '',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  blockCount: 0,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isBlocked: false
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSave={_e26}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onCancel={() => _s25(false)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  )}
Â  Â  Â  Â  {_t25 && (
Â  Â  Â  Â  Â  Â  <div className="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <GroupSetup
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  characters={_e25}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSave={_h26}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onCancel={() => _u25(false)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  )}
Â  Â  Â  Â  {_v25 && (
Â  Â  Â  Â  Â  Â  <div className="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <UserProfileSetup
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userProfile={_m25}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSave={_t26}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onCancel={() => _w25(false)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  )}
Â  Â  Â  Â  <InstructionsModalÂ 
Â  Â  Â  Â  Â  Â  isOpen={_b26}Â 
Â  Â  Â  Â  Â  Â  onClose={() => _c26(false)}Â 
Â  Â  Â  Â  />
Â  Â  </>
);
};





const CardForm = ({ initialCard: _q27, onSave: _r27, onCancel: _s27 }) => {
Â  Â  const [_t27, _u27] = useState(_q27 || {
Â  Â  Â  Â  id: `card_${Date.now()}`,
Â  Â  Â  Â  name: '',
Â  Â  Â  Â  topic: '',
Â  Â  Â  Â  description: '',
Â  Â  Â  Â  emoji: 'ðŸ“„'
Â  Â  });

Â  Â  const EMOJI_OPTIONS = ['ðŸ“„', 'ðŸ“…', 'ðŸ“ˆ', 'ðŸ’¡', 'ðŸ“°', 'ðŸ’¼', 'ðŸ“Š', 'ðŸ””'];

Â  Â  const _v27 = (_w27) => {
Â  Â  Â  Â  _w27.preventDefault();
Â  Â  Â  Â  if (!_t27.name.trim() || !_t27.topic.trim()) {
Â  Â  Â  Â  Â  Â  alert("Card Name and Topic/Keywords are required.");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â  _r27(_t27);
Â  Â  };

Â  Â  return (
Â  Â  Â  Â  <div className="min-h-screen bg-gradient-to-br from-gray-500 via-gray-700 to-gray-900 flex items-center justify-center p-4">
Â  Â  Â  Â  Â  Â  <div className="bg-white/90 backdrop-blur-sm rounded-xl shadow-2xl p-8 w-full max-w-md">
Â  Â  Â  Â  Â  Â  Â  Â  <h1 className="text-3xl font-bold text-gray-800 mb-6 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_q27 ? "Edit Update Card" : "Create New Update Card"}
Â  Â  Â  Â  Â  Â  Â  Â  </h1>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <form onSubmit={_v27} className="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Card Name</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="text"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_t27.name}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_x27 => _u27({ ..._t27, name: _x27.target.value })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="e.g., My GST Tracker"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  required
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Topic / Keywords (for Google Search)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="text"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_t27.topic}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_y27 => _u27({ ..._t27, topic: _y27.target.value })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="e.g., Latest GST notifications India"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  required
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Description (Optional)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <textarea
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value={_t27.description}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={_z27 => _u27({ ..._t27, description: _z27.target.value })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rows={3}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="What does this card track?"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-gray-700">Select Icon</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-wrap gap-2 mt-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {EMOJI_OPTIONS.map(_a28 => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={_a28}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _u27({ ..._t27, emoji: _a28 })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className={`text-2xl p-2 rounded-lg ${
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _t27.emoji === _a28 ? 'bg-blue-500 ring-2 ring-blue-700' : 'bg-gray-200 hover:bg-gray-300'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_a28}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-end space-x-2 pt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_s27}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Cancel
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="submit"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Save Card
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  );
};

const CardViewScreen = ({ card: _b28, onBack: _c28 }) => {
Â  Â  const [_d28, _e28] = useState([]);
Â  Â  const [_f28, _g28] = useState(false);
Â  Â  const [_h28, _i28] = useState(null);
Â  Â Â 
Â  Â  const _j28 = async () => {
Â  Â  Â  Â  _g28(true);
Â  Â  Â  Â  _i28(null);
Â  Â  Â  Â  _e28([]);
Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  const _k28 = currentKeyIndex;

Â  Â  Â  Â  Â  Â  const _l28 = await fetch('/api/get-updates', {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ topic: _b28.topic, keyIndex: _k28 })
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!_l28.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  if (_l28.status === 429) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error("Quota exceeded for this API key. Please try again later.");
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(`Server error: ${_l28.statusText}`);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const _m28 = await _l28.json();
Â  Â  Â  Â  Â  Â  if (_m28.updates) {
Â  Â  Â  Â  Â  Â  Â  Â  _e28(_m28.updates);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  _i28(_m28.error || "Failed to get updates.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  } catch (_n28) {
Â  Â  Â  Â  Â  Â  _i28(_n28.message);
Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  _g28(false);
Â  Â  Â  Â  }
Â  Â  };
Â  Â Â 
Â  Â  useEffect(() => {
Â  Â  Â  Â  _j28();
Â  Â  }, [_b28]);
Â  Â Â 
Â  Â  return (
Â  Â  Â  Â  <div className="app-container w-full bg-gray-100">
Â  Â  Â  Â  Â  Â  <header className="fixed-header bg-blue-600 text-white p-3 flex items-center shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={_c28} className="p-2 rounded-full hover:bg-white/20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="ml-3 flex-grow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="font-semibold text-lg">{_b28.emoji} {_b28.name}</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm opacity-90 truncate">{_b28.topic}</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_j28}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  disabled={_f28}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-2 rounded-full hover:bg-white/20 disabled:opacity-50"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title="Refresh Updates"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className={`h-6 w-6 ${_f28 ? 'animate-spin' : ''}`} fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m-15.357-2a8.001 8.001 0 0015.357 2m0 0H15" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </header>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <main className="message-container p-4">
Â  Â  Â  Â  Â  Â  Â  Â  {_b28.description && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="p-3 bg-white rounded-lg shadow mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-gray-700 italic">{_b28.description}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  {_f28 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex justify-center items-center h-32">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="ml-3 text-gray-600">Fetching latest updates...</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  {_h28 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="font-bold">Error:</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>{_h28}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  {!_f28 && !_h28 && _d28.length === 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="p-3 bg-blue-100 border border-blue-300 text-blue-800 rounded-lg text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>No significant updates found for today.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  {!_f28 && !_h28 && _d28.length > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_d28.map((_o28, _p28) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={_p28} className="p-4 bg-white rounded-xl shadow-md flex items-start gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-blue-500 font-bold text-lg">{_p28 + 1}.</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-gray-800">{_o28}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  </main>
Â  Â  Â  Â  </div>
Â  Â  );
};

const UpdatesDashboardScreen = ({ cards: _q28, onNavigateBack: _r28, onNavigateToForm: _s28, onNavigateToView: _t28, onCardUpdate: _u28, onCardDelete: _v28 }) => {
Â  Â Â 
Â  Â  const _w28 = (_x28, _y28) => {
Â  Â  Â  Â  _x28.stopPropagation();
Â  Â  Â  Â  _s28(_y28);
Â  Â  };
Â  Â Â 
Â  Â  const _z28 = (_a29, _b29) => {
Â  Â  Â  Â  _a29.stopPropagation();
Â  Â  Â  Â  if (window.confirm("Are you sure you want to delete this update card?")) {
Â  Â  Â  Â  Â  Â  _v28(_b29);
Â  Â  Â  Â  }
Â  Â  };
Â  Â Â 
Â  Â  return (
Â  Â  Â  Â  <div className="flex flex-col h-full bg-blue-600">
Â  Â  Â  Â  Â  Â  <header className="bg-blue-600 text-white p-4 pt-8 flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={_r28} className="p-2 hover:bg-white/20 rounded">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <h1 className="text-xl font-bold">Latest Updates</h1>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-10"></div>
Â  Â  Â  Â  Â  Â  </header>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <main className="flex-grow bg-white rounded-t-3xl p-4 overflow-y-auto">
Â  Â  Â  Â  Â  Â  Â  Â  {_q28.length === 0 ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-col items-center justify-center h-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-blue-100 rounded-full p-4 mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 12h6m-4-4h2" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl text-gray-700">Create your first Update Card</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-gray-500 text-center">Track daily news on topics that matter to you.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={() => _s28(null)} className="mt-4 py-2 px-4 bg-blue-600 text-white rounded-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  + Create Card
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_q28.map(_c29 => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={_c29.id}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _t28(_c29)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="flex items-center p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-3xl">{_c29.emoji}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="ml-4 flex-grow min-w-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="font-semibold text-gray-800 truncate">{_c29.name}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-gray-600 truncate">{_c29.topic}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex-shrink-0 flex gap-1 ml-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_w28.bind(null, _d29, _c29)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-2 text-blue-500 hover:bg-blue-100 rounded-full"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title="Edit Card"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_z28.bind(null, _e29, _c29.id)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-2 text-red-500 hover:bg-red-100 rounded-full"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title="Delete Card"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  {_q28.length > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => _s28(null)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title="Create New Card"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  </main>
Â  Â  Â  Â  </div>
Â  Â  );
};
Â  Â  Â  Â Â 
const DrivePromptModal = ({ onConnect: _f29, onSkip: _g29 }) => {
Â  Â  return (
Â  Â  Â  Â  <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50">
Â  Â  Â  Â  Â  Â  <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-sm text-center">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl font-bold text-gray-800 mb-4">Sync Your Data</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-gray-600 mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Connect to Google Drive to securely back up and sync your chat history across devices.
Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-col gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_f29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full py-3 px-4 rounded-lg font-semibold text-white bg-blue-600 hover:bg-blue-700 transition-colors"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Continue with Google Drive
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={_g29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full py-2 px-4 rounded-lg font-semibold text-gray-500 hover:bg-gray-200 transition-colors"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Continue without Drive
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  );
};


const App = () => {
Â  Â  const [_h29, _i29] = useState({ id: `user_${Date.now()}`, name: 'Alex', age: 25, gender: Gender.MALE, avatar: '01_CABOY.png' });
Â  Â  const [_j29, _k29] = useState([]);
Â  Â  const [_l29, _m29] = useState([]);
Â  Â  const [_n29, _o29] = useState([]);
Â  Â Â 
Â  Â  const [_p29, _q29] = useState(false);
Â  Â  const [_r29, _s29] = useState(0);
Â  Â  const [_t29, _u29] = useState(null);
Â  Â  const [_v29, _w29] = useState(false);
Â  Â Â 
Â  Â  const [_x29, _y29] = useState(null);
Â  Â  const [_z29, _a30] = useState(true);
Â  Â Â 
Â  Â  const [_b30, _c30] = useState(false);
Â  Â Â 
Â  Â  const [_d30, _e30] = useState({ screen: 'chats' });Â 

Â  Â  const _f30 = useRef(null);
Â  Â  const _g30 = useRef(null);

Â  Â  useEffect(() => {
Â  Â  Â  Â  const _h30 = async () => {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  console.log("Loading all data from IndexedDB...");
Â  Â  Â  Â  Â  Â  Â  Â  _s29(10);
Â  Â  Â  Â  Â  Â  Â  Â  const _i30 = await window.chatbotStorage.getUserProfile();
Â  Â  Â  Â  Â  Â  Â  Â  if (_i30) _i29(_i30);
Â  Â  Â  Â  Â  Â  Â  Â  _s29(25);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const _j30 = await window.chatbotStorage.getCharacters();
Â  Â  Â  Â  Â  Â  Â  Â  if (_j30) _k29(_j30);
Â  Â  Â  Â  Â  Â  Â  Â  _s29(50);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const _k30 = await window.chatbotStorage.getGroups();
Â  Â  Â  Â  Â  Â  Â  Â  if (_k30) _m29(_k30);
Â  Â  Â  Â  Â  Â  Â  Â  _s29(75);

Â  Â  Â  Â  Â  Â  Â  Â  const _l30 = await window.chatbotStorage.getUpdateCards();
Â  Â  Â  Â  Â  Â  Â  Â  if (_l30) _o29(_l30);
Â  Â  Â  Â  Â  Â  Â  Â  _s29(100);

Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => _q29(true), 500);
Â  Â  Â  Â  Â  Â  } catch (_m30) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error loading data:', _m30);
Â  Â  Â  Â  Â  Â  Â  Â  _q29(true);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };
Â  Â  Â  Â  _h30();
Â  Â  }, []);

Â  Â  useEffect(() => {
Â  Â  Â  Â  const _n30 = async () => {
Â  Â  Â  Â  Â  Â  let _o30 = null;
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  _o30 = localStorage.getItem('temp_secret_code');
Â  Â  Â  Â  Â  Â  Â  Â  if (_o30) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.removeItem('temp_secret_code');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (window.chatbotStorage) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await window.chatbotStorage.setSecretCode(_o30);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } else if (window.chatbotStorage) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _o30 = await window.chatbotStorage.getSecretCode();
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (_o30) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Found saved secret code.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _y29(_o30);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _a30(false);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("No secret code found. Redirecting to home");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = '/';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (_p30) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error loading secret code:', _p30);
Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = '/';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (_p29) {
Â  Â  Â  Â  Â  Â _n30();
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  setTimeout(_n30, 200);
Â  Â  Â  Â  }

Â  Â  }, [_p29]);

Â  Â  useEffect(() => {
Â  Â  Â  Â  if (_p29 && _h29 && _h29.id) {
Â  Â  Â  Â  Â  Â  window.chatbotStorage.setUserProfile(_h29);
Â  Â  Â  Â  }
Â  Â  }, [_h29, _p29]);

Â  Â  useEffect(() => {
Â  Â  Â  Â  if (_p29 && _j29) {
Â  Â  Â  Â  Â  Â  window.chatbotStorage.setCharacters(_j29);
Â  Â  Â  Â  }
Â  Â  }, [_j29, _p29]);

Â  Â  useEffect(() => {
Â  Â  Â  Â  if (_p29 && _l29) {
Â  Â  Â  Â  Â  Â  window.chatbotStorage.setGroups(_l29);
Â  Â  Â  Â  }
Â  Â  }, [_l29, _p29]);
Â  Â Â 
Â  Â  useEffect(() => {
Â  Â  Â  Â  if (_p29 && _n29) {
Â  Â  Â  Â  Â  Â  window.chatbotStorage.setUpdateCards(_n29);
Â  Â  Â  Â  }
Â  Â  }, [_n29, _p29]);

Â  Â  useEffect(() => {
Â  Â  }, [_x29]);

Â  Â  const _q30 = async () => {
Â  Â  Â  Â  if (!_x29 || !_v29) return;
Â  Â  Â  Â  const _r30 = await window.chatbotStorage.getAllData();Â 

Â  Â  Â  Â  if (!_r30.userProfile) {
Â  Â  Â  Â  Â  Â  console.log("Export skipped: User profile not found.");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  console.log("ðŸš€ Syncing data with Google Drive...");
Â  Â  Â  Â  const _s30 = await googleDriveService.findOrCreateFolder('Virtual Tax Friend Data');
Â  Â  Â  Â  if (!_s30) return;

Â  Â  Â  Â  const _t30 = `TaxFriend_data.json`;
Â  Â  Â  Â  const _u30 = await googleDriveService.findFileByName(_t30, _s30);

Â  Â  Â  Â  if (_u30) {
Â  Â  Â  Â  Â  Â  await googleDriveService.updateJsonFile(_u30, _r30);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  await googleDriveService.uploadJsonFile(_t30, _r30, _s30);
Â  Â  Â  Â  }
Â  Â  };Â Â 

Â  Â  const _v30 = async () => {
Â  Â  Â  Â  console.log("ðŸ“¥ Checking for data to import...");
Â  Â  Â  Â  const _w30 = await googleDriveService.findOrCreateFolder('Virtual Tax Friend Data');
Â  Â  Â  Â  if (!_w30) return;

Â  Â  Â  Â  const _x30 = `TaxFriend_data.json`;
Â  Â  Â  Â  const _y30 = await googleDriveService.findFileByName(_x30, _w30);
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (_y30) {
Â  Â  Â  Â  Â  Â  const _z30 = await googleDriveService.getFileContent(_y30);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (_z30 && typeof _z30 === 'object') {
Â  Â  Â  Â  Â  Â  Â  Â  console.log("âœ… Data found on Drive, importing...");
Â  Â  Â  Â  Â  Â  Â  Â  const _a31 = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userProfile: _z30.userProfile || null,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  characters: Array.isArray(_z30.characters) ? _z30.characters : [],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  groups: Array.isArray(_z30.groups) ? _z30.groups : [],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateCards: Array.isArray(_z30.updateCards) ? _z30.updateCards : []
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  await window.chatbotStorage.setAllData(_a31);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (_a31.userProfile) _i29(_a31.userProfile);
Â  Â  Â  Â  Â  Â  Â  Â  _k29(_a31.characters);
Â  Â  Â  Â  Â  Â  Â  Â  _m29(_a31.groups);
Â  Â  Â  Â  Â  Â  Â  Â  _o29(_a31.updateCards);

Â  Â  Â  Â  Â  Â  Â  Â  if (!sessionStorage.getItem('importAlertShown')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("Chat history and data imported from Google Drive!");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sessionStorage.setItem('importAlertShown', 'true');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â console.warn("âš ï¸ Import skipped: Data from Drive was empty or corrupted.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  console.log(`No previous data found on Drive.`);
Â  Â  Â  Â  }
Â  Â  };

Â  Â  useEffect(() => {
Â  Â  Â  Â  const _b31 = () => _w29(true);
Â  Â  Â  Â  const _c31 = () => _w29(false);
Â  Â  Â  Â  window.addEventListener('google-authed', _b31);
Â  Â  Â  Â  window.addEventListener('google-signed-out', _c31);
Â  Â  Â  Â  return () => {
Â  Â  Â  Â  Â  Â  window.removeEventListener('google-authed', _b31);
Â  Â  Â  Â  Â  Â  window.removeEventListener('google-signed-out', _c31);
Â  Â  Â  Â  };
Â  Â  }, []);
Â  Â Â 
Â  Â  useEffect(() => {
Â  Â  Â  Â  if (_v29 && _x29) {
Â  Â  Â  Â  Â  Â  console.log("Google Auth is active. Starting import and auto-export interval.");
Â  Â  Â  Â  Â  Â  _v30();
Â  Â  Â  Â  Â  Â  if (_f30.current) clearInterval(_f30.current);
Â  Â  Â  Â  Â  Â  _f30.current = setInterval(_q30, 30000);
Â  Â  Â  Â  Â  Â  return () => {
Â  Â  Â  Â  Â  Â  Â  Â  if (_f30.current) clearInterval(_f30.current);
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  }
Â  Â  }, [_v29, _x29]);

Â  Â  useEffect(() => {
Â  Â  Â  Â  const _d31 = () => {
Â  Â  Â  Â  Â  Â  if (_g30.current) clearTimeout(_g30.current);
Â  Â  Â  Â  Â  Â  _g30.current = setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  alert("You have been logged out due to inactivity.");
Â  Â  Â  Â  Â  Â  Â  Â  _e31();
Â  Â  Â  Â  Â  Â  }, 3600000);
Â  Â  Â  Â  };
Â  Â  Â  Â  if (_x29) {
Â  Â  Â  Â  Â  Â  const _f31 = ['mousemove', 'keypress', 'click', 'scroll'];
Â  Â  Â  Â  Â  Â  _f31.forEach(_g31 => window.addEventListener(_g31, _d31));
Â  Â  Â  Â  Â  Â  _d31();
Â  Â  Â  Â  Â  Â  return () => {
Â  Â  Â  Â  Â  Â  Â  Â  _f31.forEach(_h31 => window.removeEventListener(_h31, _d31));
Â  Â  Â  Â  Â  Â  Â  Â  if (_g30.current) clearTimeout(_g30.current);
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  }
Â  Â  }, [_x29]);

Â  Â  const _e31 = async () => {
Â  Â  Â  Â  console.log("Logging out...");
Â  Â  Â  Â  if (window.gapiAccessToken) {
Â  Â  Â  Â  Â  Â  google.accounts.oauth2.revoke(window.gapiAccessToken.access_token);
Â  Â  Â  Â  Â  Â  window.gapiAccessToken = null;
Â  Â  Â  Â  Â  Â  if (window.chatbotStorage) await window.chatbotStorage.removeAuthToken();
Â  Â  Â  Â  Â  Â  _w29(false);
Â  Â  Â  Â  }
Â  Â  Â  Â  _y29(null);
Â  Â  Â  Â  if (window.chatbotStorage) await window.chatbotStorage.removeSecretCode();
Â  Â  Â  Â Â 
Â  Â  Â  Â  sessionStorage.removeItem('importAlertShown');
Â  Â  Â  Â  if (_f30.current) clearInterval(_f30.current);
Â  Â  Â  Â  if (_g30.current) clearTimeout(_g30.current);
Â  Â  Â  Â Â 
Â  Â  Â  Â  window.location.href = '/';
Â  Â  };

Â  Â  const _i31 = (_j31) => {
Â  Â  Â  Â  _o29(_k31 => {
Â  Â  Â  Â  Â  Â  const _l31 = _k31.some(_m31 => _m31.id === _j31.id);
Â  Â  Â  Â  Â  Â  if (_l31) {
Â  Â  Â  Â  Â  Â  Â  Â  return _k31.map(_n31 => _n31.id === _j31.id ? _j31 : _n31);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  return [..._k31, _j31];
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  Â  _e30({ screen: 'updates-dashboard' });
Â  Â  };

Â  Â  const _o31 = (_p31) => {
Â  Â  Â  Â  _o29(_q31 => _q31.filter(_r31 => _r31.id !== _p31));
Â  Â  };

Â  Â  if (!_p29 || _z29) {
Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  <div className="h-screen flex flex-col justify-center items-center bg-gray-100">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-xl font-semibold text-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {_z29 ? 'Authenticating...' : 'Loading Your CA...'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-64 bg-gray-200 rounded-full h-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <divÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="bg-blue-500 h-2 rounded-full transition-all"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  style={{ width: `${_r29}%` }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  );
Â  Â  }

Â  Â  if (!_h29.name) {
Â  Â  Â  Â  return <UserProfileSetup userProfile={_h29} onSave={_i29} isInitialSetup={true} />;
Â  Â  }
Â  Â Â 
Â  Â  const _s31 = () => {
Â  Â  Â  Â  switch (_d30.screen) {
Â  Â  Â  Â  Â  Â  case 'chats':
Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CharacterList
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  characters={_j29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  groups={_l29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSelectCharacter={_t31 => _e30({ screen: 'chat-single', id: _t31 })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSelectGroup={_u31 => _e30({ screen: 'chat-group', id: _u31 })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onNavigateToUpdates={() => _e30({ screen: 'updates-dashboard' })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setCharacters={_k29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setGroups={_m29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setUserProfile={_i29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setChatBackground={_u29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userProfile={_h29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  chatBackground={_t29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isGoogleAuthed={_v29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onLogout={_e31}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  case 'chat-single':
Â  Â  Â  Â  Â  Â  Â  Â  const _v31 = _j29.find(_w31 => _w31.id === _d30.id);
Â  Â  Â  Â  Â  Â  Â  Â  if (!_v31) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _e30({ screen: 'chats' });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ChatScreen
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  character={_v31}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userProfile={_h29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onCharacterUpdate={_x31 => _k29(_y31 => _y31.map(_z31 => _z31.id === _x31.id ? _x31 : _z31))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onBack={() => _e30({ screen: 'chats' })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onUserProfileUpdate={_i29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  backgroundUrl={_t29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSetBackground={_u29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  case 'chat-group':
Â  Â  Â  Â  Â  Â  Â  Â  Â const _a32 = _l29.find(_b32 => _b32.id === _d30.id);
Â  Â  Â  Â  Â  Â  Â  Â  Â if (!_a32) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _e30({ screen: 'chats' });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <GroupChatScreen
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  group={_a32}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  characters={_j29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userProfile={_h29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onGroupUpdate={_c32 => _m29(_d32 => _d32.map(_e32 => _e32.id === _c32.id ? _c32 : _e32))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onBack={() => _e30({ screen: 'chats' })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onUserProfileUpdate={_i29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  backgroundUrl={_t29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSetBackground={_u29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  case 'updates-dashboard':
Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <UpdatesDashboardScreen
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cards={_n29}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onNavigateBack={() => _e30({ screen: 'chats' })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onNavigateToForm={_f32 => _e30({ screen: 'updates-form', card: _f32 })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onNavigateToView={_g32 => _e30({ screen: 'updates-view', card: _g32 })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onCardUpdate={_i31}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onCardDelete={_o31}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  case 'updates-form':
Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CardForm
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  initialCard={_d30.card}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSave={_i31}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onCancel={() => _e30({ screen: 'updates-dashboard' })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  case 'updates-view':
Â  Â  Â  Â  Â  Â  Â  Â  Â if (!_d30.card) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _e30({ screen: 'updates-dashboard' });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <CardViewScreen
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  card={_d30.card}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onBack={() => _e30({ screen: 'updates-dashboard' })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  default:
Â  Â  Â  Â  Â  Â  Â  Â  _e30({ screen: 'chats' });
Â  Â  Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  }
Â  Â  };

Â  Â  return (
Â  Â  Â  Â  <div className="app-container">
Â  Â  Â  Â  Â  Â  {_b30 && (
Â  Â  Â  Â  Â  Â  Â  Â  <DrivePromptModalÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onConnect={() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  handleAuthClick();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _c30(false);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onSkip={() => _c30(false)}
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  {_s31()}
Â  Â  Â  Â  </div>
Â  Â  );
};
// --- NAYA APP COMPONENT END ---


// --- RENDER ---
// Main Application Wrapper with Authentication

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);


Â  Â  </script>
</body>
</html>
